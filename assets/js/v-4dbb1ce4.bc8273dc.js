"use strict";(self.webpackChunkmm_notes=self.webpackChunkmm_notes||[]).push([[804],{7592:(l,s,n)=>{n.r(s),n.d(s,{data:()=>e});const e={key:"v-4dbb1ce4",path:"/interview/browser/",title:"浏览器知识",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"跨域",slug:"跨域",children:[{level:3,title:"常用的跨域解决方案",slug:"常用的跨域解决方案",children:[]},{level:3,title:"CORS 跨源资源共享",slug:"cors-跨源资源共享",children:[]},{level:3,title:"JSONP",slug:"jsonp",children:[]}]},{level:2,title:"浏览器缓存机制",slug:"浏览器缓存机制",children:[{level:3,title:"强缓存（200 OK）",slug:"强缓存-200-ok",children:[]},{level:3,title:"协商缓存（304 Not Modified）",slug:"协商缓存-304-not-modified",children:[]},{level:3,title:"应用场景",slug:"应用场景",children:[]},{level:3,title:"用户行为对缓存的影响",slug:"用户行为对缓存的影响",children:[]}]},{level:2,title:"浏览器存储",slug:"浏览器存储",children:[{level:3,title:"Cookie",slug:"cookie",children:[]},{level:3,title:"Web Storage",slug:"web-storage",children:[]},{level:3,title:"IndexedDB",slug:"indexeddb",children:[]}]}],filePathRelative:"interview/browser/README.md",git:{updatedTime:1657461749e3}}},7401:(l,s,n)=>{n.r(s),n.d(s,{default:()=>Ms});var e=n(6252),o=n(809);const a=(0,e._)("h1",{id:"浏览器知识",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#浏览器知识","aria-hidden":"true"},"#"),(0,e.Uk)(" 浏览器知识")],-1),_=(0,e._)("h2",{id:"跨域",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#跨域","aria-hidden":"true"},"#"),(0,e.Uk)(" 跨域")],-1),c={class:"custom-container tip"},r=(0,e._)("p",{class:"custom-container-title"},"跨域的原因 —— 浏览器的同源策略",-1),t={href:"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy",target:"_blank",rel:"noopener noreferrer"},D=(0,e.Uk)("同源策略"),p=(0,e.Uk)("是浏览器一个重要的安全策略，它用于限制一个 "),i=(0,e._)("code",null,"origin",-1),u=(0,e.Uk)(" 的文档或者它加载的脚本如何能与另一个源的资源进行交互。它能帮助阻隔恶意文档，减少可能被攻击的媒介"),y=(0,e._)("p",null,[(0,e.Uk)("同源的定义是两个 "),(0,e._)("code",null,"URL"),(0,e.Uk)(" 的 "),(0,e._)("strong",null,"协议"),(0,e.Uk)("、"),(0,e._)("strong",null,"域名"),(0,e.Uk)("(子域名 + 主域名)、"),(0,e._)("strong",null,"端口号"),(0,e.Uk)(" 都相同，否则就会出现跨域")],-1),d=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"同源策略的限制范围"),(0,e._)("ol",null,[(0,e._)("li",null,[(0,e.Uk)("限制跨源网络访问: "),(0,e._)("code",null,"AJAX"),(0,e.Uk)(" 请求不能发送")]),(0,e._)("li",null,[(0,e.Uk)("限制跨源脚本 "),(0,e._)("code",null,"API"),(0,e.Uk)(" 访问: "),(0,e._)("code",null,"DOM"),(0,e.Uk)(" 无法获得")]),(0,e._)("li",null,[(0,e.Uk)("限制跨源数据存储访问: "),(0,e._)("code",null,"Cookie"),(0,e.Uk)(),(0,e._)("code",null,"LocalStorage"),(0,e.Uk)(" 和 "),(0,e._)("code",null,"IndexDB"),(0,e.Uk)(" 无法读取")])]),(0,e._)("p",null,"一般常说的跨域指网络跨域")],-1),C=(0,e._)("h3",{id:"常用的跨域解决方案",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#常用的跨域解决方案","aria-hidden":"true"},"#"),(0,e.Uk)(" 常用的跨域解决方案")],-1),k=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"常用的跨域解决方案"),(0,e._)("ol",null,[(0,e._)("li",null,[(0,e._)("strong",null,"CORS")]),(0,e._)("li",null,[(0,e._)("strong",null,"JSONP")]),(0,e._)("li",null,"Nginx 反向代理"),(0,e._)("li",null,"WebSocket"),(0,e._)("li",null,"postMessage"),(0,e._)("li",null,"document.domain")])],-1),U=(0,e._)("h3",{id:"cors-跨源资源共享",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#cors-跨源资源共享","aria-hidden":"true"},"#"),(0,e.Uk)(" CORS 跨源资源共享")],-1),b={href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS",target:"_blank",rel:"noopener noreferrer"},m=(0,e.Uk)("CORS (跨源资源共享)"),h=(0,e.Uk)(" 是 "),E={href:"https://developer.mozilla.org/zh-CN/docs/Glossary/HTTP",target:"_blank",rel:"noopener noreferrer"},g=(0,e.Uk)("HTTP"),A=(0,e.Uk)(" 的一部分，它允许浏览器向跨源服务器发出 "),F=(0,e._)("code",null,"XMLHttpRequest",-1),f=(0,e.Uk)(" 请求，从而解决了 "),S=(0,e._)("code",null,"AJAX",-1),x=(0,e.Uk)(" 只能同源使用的限制。"),v=(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e._)("code",null,"CORS"),(0,e.Uk)(" 需要浏览器和服务器同时支持，目前所有浏览器均已支持，只需服务器配置即可使用")])],-1),j=(0,e._)("p",null,[(0,e.Uk)("浏览器将 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求分成两类: "),(0,e._)("strong",null,"简单请求"),(0,e.Uk)("和"),(0,e._)("strong",null,"非简单请求")],-1),O=(0,e._)("h4",{id:"简单请求",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#简单请求","aria-hidden":"true"},"#"),(0,e.Uk)(" 简单请求")],-1),I=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"简单请求必须同时满足以下条件"),(0,e._)("blockquote",null,[(0,e._)("p",null,"日常开发只会关注前两点")]),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("请求方法是以下三种方法之一 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"HEAD")]),(0,e._)("li",null,[(0,e._)("code",null,"GET")]),(0,e._)("li",null,[(0,e._)("code",null,"POST")])])]),(0,e._)("li",null,[(0,e.Uk)("只使用了如下的安全首部字段，不得人为设置其他首部字段 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Accept")]),(0,e._)("li",null,[(0,e._)("code",null,"Accept-Language")]),(0,e._)("li",null,[(0,e._)("code",null,"Content-Language")]),(0,e._)("li",null,[(0,e._)("code",null,"Content-Type"),(0,e.Uk)(" 仅限以下三种 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"application/x-www-form-urlencoded")]),(0,e._)("li",null,[(0,e._)("code",null,"multipart/form-data")]),(0,e._)("li",null,[(0,e._)("code",null,"text/plain")])])])])]),(0,e._)("li",null,[(0,e.Uk)("请求中的任意 "),(0,e._)("code",null,"XMLHttpRequestUpload"),(0,e.Uk)(" 对象均没有注册任何事件监听器(使用 "),(0,e._)("code",null,"XMLHttpRequest.upload"),(0,e.Uk)(" 属性访问"),(0,e._)("code",null,"XMLHttpRequestUpload"),(0,e.Uk)(" 对象)")]),(0,e._)("li",null,[(0,e.Uk)("请求中没有使用 "),(0,e._)("code",null,"ReadableStream"),(0,e.Uk)(" 对象")])])],-1),w=(0,e._)("h5",{id:"简单请求基本流程",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#简单请求基本流程","aria-hidden":"true"},"#"),(0,e.Uk)(" 简单请求基本流程")],-1),T=(0,e._)("ol",null,[(0,e._)("li",null,[(0,e.Uk)("浏览器会直接发出 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求并在请求头信息之中增加一个 "),(0,e._)("code",null,"Origin"),(0,e.Uk)(" 字段(用来说明本次请求来自哪个源(协议 + 域名 + 端口))")]),(0,e._)("li",null,[(0,e.Uk)("服务器判断 "),(0,e._)("code",null,"Origin"),(0,e.Uk)(" 字段决定是否同意这次请求 "),(0,e._)("ol",null,[(0,e._)("li",null,[(0,e.Uk)("通过请求会在响应头增加 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 相关的字段(以"),(0,e._)("code",null,"Access-Control-"),(0,e.Uk)("开头)")]),(0,e._)("li",null,[(0,e.Uk)("拒绝请求时不会增加 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 相关的字段，浏览器会抛出异常")])])])],-1),R=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"简单请求响应头中的 CORS 字段"),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Origin"),(0,e.Uk)(": 只能是 "),(0,e._)("code",null,"*"),(0,e.Uk)("(接受任意域名的请求)或者是请求时 "),(0,e._)("code",null,"Origin"),(0,e.Uk)(" 字段的值")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Credentials"),(0,e.Uk)("(可选): 是一个布尔值,表示是否允许发送 "),(0,e._)("code",null,"Cookie")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Expose-Headers"),(0,e.Uk)("(可选): "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求时 "),(0,e._)("code",null,"XMLHttpRequest"),(0,e.Uk)(" 对象的 "),(0,e._)("code",null,"getResponseHeader()"),(0,e.Uk)(" 方法只能拿到 6 个基本字段："),(0,e._)("code",null,"Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Pragma"),(0,e.Uk)("。如果想拿到其他字段就必须在 "),(0,e._)("code",null,"Access-Control-Expose-Headers"),(0,e.Uk)(" 里面指定")])])],-1),M=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"CORS 中的 Cookie 设置"),(0,e._)("p",null,[(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求默认不发送 "),(0,e._)("code",null,"Cookie"),(0,e.Uk)("，如果需要发送需要满足如下条件")]),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("服务器必须设置 "),(0,e._)("code",null,"Access-Control-Allow-Credentials: true")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Origin"),(0,e.Uk)(" 字段不能为 "),(0,e._)("code",null,"*")]),(0,e._)("li",null,[(0,e._)("code",null,"AJAX"),(0,e.Uk)(" 请求的配置项需设置 "),(0,e._)("code",null,"withCredentials = true")])])],-1),P=(0,e._)("h4",{id:"非简单请求",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#非简单请求","aria-hidden":"true"},"#"),(0,e.Uk)(" 非简单请求")],-1),B=(0,e._)("p",null,[(0,e.Uk)("非简单请求是那种对服务器有特殊要求的请求，如请求方法是 "),(0,e._)("code",null,"PUT"),(0,e.Uk)(" 或 "),(0,e._)("code",null,"DELETE"),(0,e.Uk)("，或者 "),(0,e._)("code",null,"Content-Type"),(0,e.Uk)(" 字段的类型是 "),(0,e._)("code",null,"application/json"),(0,e.Uk)("。"),(0,e._)("br"),(0,e.Uk)(" 非简单请求会在正式通信之前增加一次 "),(0,e._)("code",null,"HTTP"),(0,e.Uk)(" 查询请求，称为"),(0,e._)("strong",null,"预检请求"),(0,e.Uk)("，用于获取服务器是否允许该实际请求，同时避免跨域请求对服务器的用户数据产生预期之外的影响")],-1),L=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"预检请求"),(0,e._)("p",null,[(0,e.Uk)("预检请求用的请求方法是 "),(0,e._)("code",null,"OPTIONS"),(0,e.Uk)(" 表示这个请求是用来询问的")]),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("在预检请求请求头信息里会包含如下字段 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Origin"),(0,e.Uk)(": 表示本次请求来自哪个源")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Request-Method"),(0,e.Uk)(": 用于列出浏览器的 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求会用到哪些 "),(0,e._)("code",null,"HTTP"),(0,e.Uk)(" 方法")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Request-Headers"),(0,e.Uk)("(可选): 指定浏览器 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求会额外发送的头信息字段")])])]),(0,e._)("li",null,[(0,e.Uk)("服务器通过后会在预检请求响应头中设置如下字段 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Origin")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Credentials"),(0,e.Uk)("(可选)")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Methods"),(0,e.Uk)(": 表示服务器支持的所有跨域请求的方法(为了避免多次预检请求)")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Headers"),(0,e.Uk)(": 表示服务器支持的所有头信息字段，不限于浏览器在预检中请求的字段")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Max-Age"),(0,e.Uk)("(可选): 用来指定本次预检请求的有效期单位为秒，在有效期内将不发出另一条预检请求")])])])])],-1),q=(0,e._)("p",null,[(0,e.Uk)("一旦服务器通过了预检请求，以后每次浏览器正常的 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求，就都跟简单请求一样会有一个 "),(0,e._)("code",null,"Origin"),(0,e.Uk)(" 头信息字段。服务器的回应也都会有一个 "),(0,e._)("code",null,"Access-Control-Allow-Origin"),(0,e.Uk)(" 头信息字段")],-1),W=(0,e._)("details",{class:"custom-container details"},[(0,e._)("summary",null,"CORS 请求过程"),(0,e._)("p",null,[(0,e._)("img",{src:o,alt:"CORS 请求过程"})])],-1),H={href:"http://www.ruanyifeng.com/blog/2016/04/cors.html",target:"_blank",rel:"noopener noreferrer"},N=(0,e.Uk)("参考资料 —— 跨域资源共享 CORS 详解"),J=(0,e._)("h3",{id:"jsonp",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#jsonp","aria-hidden":"true"},"#"),(0,e.Uk)(" JSONP")],-1),z=(0,e._)("p",null,[(0,e._)("code",null,"JSONP"),(0,e.Uk)(" 是利用 "),(0,e._)("code",null,"<script>"),(0,e.Uk)(" 标签没有跨域限制的漏洞，当前源可以得到从其他来源动态产生的 "),(0,e._)("code",null,"JSON"),(0,e.Uk)(" 数据")],-1),X=(0,e._)("p",null,[(0,e._)("strong",null,[(0,e._)("code",null,"JSONP"),(0,e.Uk)(" 请求过程流程")])],-1),$=(0,e._)("ol",null,[(0,e._)("li",null,"前端定义一个解析的回调函数"),(0,e._)("li",null,[(0,e.Uk)("创建 "),(0,e._)("code",null,"script"),(0,e.Uk)(" 标签，其 "),(0,e._)("code",null,"src"),(0,e.Uk)(" 指向接口地址并拼接好参数和回调函数名")]),(0,e._)("li",null,[(0,e.Uk)("后端处理数据并将其拼接到前端传入的回调函数中(拼接好的数据必须是一个合法的 "),(0,e._)("code",null,"JavaScript"),(0,e.Uk)(" 脚本 )")]),(0,e._)("li",null,[(0,e.Uk)("浏览器执行后端返回的 "),(0,e._)("code",null,"JavaScript"),(0,e.Uk)(" 脚本代码(调用定义好的回调函数)并删除刚创建的 "),(0,e._)("code",null,"script"),(0,e.Uk)(" 标签")])],-1),G=(0,e._)("details",{class:"custom-container details"},[(0,e._)("summary",null,"JSONP 代码实现"),(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"function"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#DCDCAA"}},"normalizeParams"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"params"),(0,e._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#C586C0"}},"if"),(0,e._)("span",{style:{color:"#D4D4D4"}}," (!"),(0,e._)("span",{style:{color:"#9CDCFE"}},"params"),(0,e._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#C586C0"}},"return"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#CE9178"}},"''")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#C586C0"}},"return"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4EC9B0"}},"Object"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"keys"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"params"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    ."),(0,e._)("span",{style:{color:"#DCDCAA"}},"map"),(0,e._)("span",{style:{color:"#D4D4D4"}},"(("),(0,e._)("span",{style:{color:"#9CDCFE"}},"key"),(0,e._)("span",{style:{color:"#D4D4D4"}},") "),(0,e._)("span",{style:{color:"#569CD6"}},"=>"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#CE9178"}},"`"),(0,e._)("span",{style:{color:"#569CD6"}},"${"),(0,e._)("span",{style:{color:"#9CDCFE"}},"key"),(0,e._)("span",{style:{color:"#569CD6"}},"}"),(0,e._)("span",{style:{color:"#CE9178"}},"="),(0,e._)("span",{style:{color:"#569CD6"}},"${"),(0,e._)("span",{style:{color:"#9CDCFE"}},"params"),(0,e._)("span",{style:{color:"#D4D4D4"}},"["),(0,e._)("span",{style:{color:"#9CDCFE"}},"key"),(0,e._)("span",{style:{color:"#D4D4D4"}},"]"),(0,e._)("span",{style:{color:"#569CD6"}},"}"),(0,e._)("span",{style:{color:"#CE9178"}},"`"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    ."),(0,e._)("span",{style:{color:"#DCDCAA"}},"join"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'&'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"function"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#DCDCAA"}},"jsonp"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"url"),(0,e._)("span",{style:{color:"#D4D4D4"}},", "),(0,e._)("span",{style:{color:"#9CDCFE"}},"params"),(0,e._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#C586C0"}},"return"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#569CD6"}},"new"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4EC9B0"}},"Promise"),(0,e._)("span",{style:{color:"#D4D4D4"}},"(("),(0,e._)("span",{style:{color:"#9CDCFE"}},"resolve"),(0,e._)("span",{style:{color:"#D4D4D4"}},") "),(0,e._)("span",{style:{color:"#569CD6"}},"=>"),(0,e._)("span",{style:{color:"#D4D4D4"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"callback"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#CE9178"}},"`jsonp_"),(0,e._)("span",{style:{color:"#569CD6"}},"${"),(0,e._)("span",{style:{color:"#4EC9B0"}},"Date"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"now"),(0,e._)("span",{style:{color:"#D4D4D4"}},"()"),(0,e._)("span",{style:{color:"#569CD6"}},"}"),(0,e._)("span",{style:{color:"#CE9178"}},"`")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#9CDCFE"}},"window"),(0,e._)("span",{style:{color:"#D4D4D4"}},"["),(0,e._)("span",{style:{color:"#9CDCFE"}},"callback"),(0,e._)("span",{style:{color:"#D4D4D4"}},"] = "),(0,e._)("span",{style:{color:"#569CD6"}},"function"),(0,e._)("span",{style:{color:"#D4D4D4"}}," ("),(0,e._)("span",{style:{color:"#9CDCFE"}},"data"),(0,e._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"      "),(0,e._)("span",{style:{color:"#DCDCAA"}},"resolve"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"data"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"      "),(0,e._)("span",{style:{color:"#9CDCFE"}},"document"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"body"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"removeChild"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"scriptEle"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    }")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#9CDCFE"}},"params"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"cb"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"callback")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"scriptEle"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"document"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"createElement"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'script'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#9CDCFE"}},"scriptEle"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"src"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#CE9178"}},"`"),(0,e._)("span",{style:{color:"#569CD6"}},"${"),(0,e._)("span",{style:{color:"#9CDCFE"}},"url"),(0,e._)("span",{style:{color:"#569CD6"}},"}${"),(0,e._)("span",{style:{color:"#9CDCFE"}},"url"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"includes"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'?'"),(0,e._)("span",{style:{color:"#D4D4D4"}},") ? "),(0,e._)("span",{style:{color:"#CE9178"}},"'&'"),(0,e._)("span",{style:{color:"#D4D4D4"}}," : "),(0,e._)("span",{style:{color:"#CE9178"}},"'?'"),(0,e._)("span",{style:{color:"#569CD6"}},"}${"),(0,e._)("span",{style:{color:"#DCDCAA"}},"normalizeParams"),(0,e._)("span",{style:{color:"#D4D4D4"}},"(")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"      "),(0,e._)("span",{style:{color:"#9CDCFE"}},"params")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    )"),(0,e._)("span",{style:{color:"#569CD6"}},"}"),(0,e._)("span",{style:{color:"#CE9178"}},"`")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#9CDCFE"}},"document"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"body"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"appendChild"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"scriptEle"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  })")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#DCDCAA"}},"jsonp"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'https://www.baidu.com/sugrec'"),(0,e._)("span",{style:{color:"#D4D4D4"}},", {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"prod:"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#CE9178"}},"'pc'"),(0,e._)("span",{style:{color:"#D4D4D4"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"wd:"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#CE9178"}},"'跨域'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"})."),(0,e._)("span",{style:{color:"#DCDCAA"}},"then"),(0,e._)("span",{style:{color:"#D4D4D4"}},"(("),(0,e._)("span",{style:{color:"#9CDCFE"}},"res"),(0,e._)("span",{style:{color:"#D4D4D4"}},") "),(0,e._)("span",{style:{color:"#569CD6"}},"=>"),(0,e._)("span",{style:{color:"#D4D4D4"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"console"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"log"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"res"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"})")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"24"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"25"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"26"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"27"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"28"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"29"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"30"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"31"),(0,e._)("br")])])],-1),K=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"JSONP 跨域优缺点"),(0,e._)("ul",null,[(0,e._)("li",null,"优点: 实现简单，兼容性好"),(0,e._)("li",null,[(0,e.Uk)("缺点 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("只支持 "),(0,e._)("code",null,"GET"),(0,e.Uk)(" 请求")]),(0,e._)("li",null,[(0,e.Uk)("容易遭受 "),(0,e._)("code",null,"XSS"),(0,e.Uk)(" 攻击")])])])])],-1),Z={href:"https://juejin.cn/post/6844904126246027278",target:"_blank",rel:"noopener noreferrer"},Q=(0,e.Uk)("了解更多跨域解决方案请点击 —— 10 种跨域解决方案"),Y=(0,e._)("h2",{id:"浏览器缓存机制",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#浏览器缓存机制","aria-hidden":"true"},"#"),(0,e.Uk)(" 浏览器缓存机制")],-1),V=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("ol",null,[(0,e._)("li",null,"浏览器在发送请求前先判断是否命中强缓存")]),(0,e._)("ul",null,[(0,e._)("li",null,"命中则不发送请求直接使用缓存，否则进行下一步")])]),(0,e._)("li",null,[(0,e._)("ol",{start:"2"},[(0,e._)("li",null,"浏览器发送请求后会由服务器判断是否命中协商缓存")]),(0,e._)("ul",null,[(0,e._)("li",null,"命中则从缓存获取资源，否则进行下一步")])]),(0,e._)("li",null,[(0,e._)("ol",{start:"3"},[(0,e._)("li",null,"浏览器直接使用服务器返回的资源并更新缓存")])])],-1),ll=(0,e._)("h3",{id:"强缓存-200-ok",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#强缓存-200-ok","aria-hidden":"true"},"#"),(0,e.Uk)(" 强缓存（200 OK）")],-1),sl=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Expires"),(0,e.Uk)(" 是服务器告诉浏览器的缓存过期时间（值为 "),(0,e._)("code",null,"GMT"),(0,e.Uk)(" 时间，即格林尼治时间） "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"HTTP1.0"),(0,e.Uk)(" 的产物")]),(0,e._)("li",null,"受本地时间影响"),(0,e._)("li",null,[(0,e.Uk)("设置的值为 "),(0,e._)("code",null,"max-age=xxx"),(0,e.Uk)("（xxx 是 秒）")])])]),(0,e._)("li",null,[(0,e._)("code",null,"Cache-Control"),(0,e.Uk)(" 用于控制缓存的行为 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("是 "),(0,e._)("code",null,"HTTP1.1"),(0,e.Uk)(" 的产物")]),(0,e._)("li",null,[(0,e.Uk)("取值 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"public"),(0,e.Uk)("：允许被客户端和代理服务器缓存")]),(0,e._)("li",null,[(0,e._)("code",null,"private"),(0,e.Uk)("：只允许被客户端缓存（默认值）")]),(0,e._)("li",null,[(0,e._)("code",null,"no-cache"),(0,e.Uk)("：允许被客户端和代理服务器缓存，但在使用缓存时需要经过协商缓存来验证决定")]),(0,e._)("li",null,[(0,e._)("code",null,"no-store"),(0,e.Uk)("：所有内容都不会被缓存，即不使用强制缓存也不使用协商缓存每次请求都会下载完整的资源")]),(0,e._)("li",null,[(0,e._)("code",null,"maxage=xxx"),(0,e.Uk)("：设置客户端和代理服务器的缓存时间，表示缓存内容将在 xxx 秒后失效")]),(0,e._)("li",null,[(0,e._)("code",null,"s-maxage=xxx"),(0,e.Uk)("：设置代理服务器的缓存时间（优先级比 "),(0,e._)("code",null,"max-age"),(0,e.Uk)(" 高）")])])])])])],-1),nl=(0,e._)("div",{class:"custom-container warning"},[(0,e._)("p",{class:"custom-container-title"},"Cache-Control 注意点"),(0,e._)("p",null,[(0,e._)("code",null,"no-cache"),(0,e.Uk)(" 名字存在误导，其并不是不缓存数据，只是在使用缓存时需要经过协商缓存来验证决定"),(0,e._)("br"),(0,e._)("code",null,"max-age=0"),(0,e.Uk)(" 和 "),(0,e._)("code",null,"no-cache"),(0,e.Uk)(" 效果一致")])],-1),el=(0,e._)("h4",{id:"缓存位置",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#缓存位置","aria-hidden":"true"},"#"),(0,e.Uk)(" 缓存位置")],-1),ol=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("内存缓存（memory cache） "),(0,e._)("ul",null,[(0,e._)("li",null,"快速读取（内存缓存将编译解析后的文件，直接存入该进程的内存中，占据该进程一定的内存资源，以方便下次运行使用时的快速读取）"),(0,e._)("li",null,"进程关闭时数据会被清除"),(0,e._)("li",null,[(0,e.Uk)("不请求网络资源，资源存在内存中一般 "),(0,e._)("code",null,"JS"),(0,e.Uk)(" 和图片文件会存入内存")]),(0,e._)("li",null,[(0,e.Uk)("状态码："),(0,e._)("code",null,"200（from memory cache）")])])]),(0,e._)("li",null,[(0,e.Uk)("硬盘缓存（disk cache） "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("写入硬盘文件进行 "),(0,e._)("code",null,"I/O"),(0,e.Uk)(" 操作")]),(0,e._)("li",null,"进程关闭时数据不会被清除"),(0,e._)("li",null,[(0,e.Uk)("速度比 "),(0,e._)("code",null,"memory cache"),(0,e.Uk)(" 慢")]),(0,e._)("li",null,[(0,e.Uk)("不请求网络资源，资源存在磁盘中一般非脚本会存在磁盘中，如 "),(0,e._)("code",null,"css")]),(0,e._)("li",null,[(0,e.Uk)("状态码："),(0,e._)("code",null,"200（from disk cache）")])])]),(0,e._)("li",null,[(0,e.Uk)("代理服务器缓存（server worker） "),(0,e._)("ul",null,[(0,e._)("li",null,"可以拦截处理页面的所有网络请求"),(0,e._)("li",null,[(0,e.Uk)("仅 "),(0,e._)("code",null,"HTTPS"),(0,e.Uk)(" 下可用、存在兼容问题")]),(0,e._)("li",null,[(0,e.Uk)("状态码："),(0,e._)("code",null,"200（from service worker）")])])])],-1),al=(0,e._)("h3",{id:"协商缓存-304-not-modified",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#协商缓存-304-not-modified","aria-hidden":"true"},"#"),(0,e.Uk)(" 协商缓存（304 Not Modified）")],-1),_l=(0,e._)("h4",{id:"last-modified-和-if-modified-since",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#last-modified-和-if-modified-since","aria-hidden":"true"},"#"),(0,e.Uk)(),(0,e._)("code",null,"Last-Modified"),(0,e.Uk)(" 和 "),(0,e._)("code",null,"If-Modified-Since")],-1),cl=(0,e._)("p",null,[(0,e._)("code",null,"Last-Modified"),(0,e.Uk)(" 表示资源的最后修改时间，值为 "),(0,e._)("code",null,"GMT"),(0,e.Uk)(" 格式时间字符串，精确到秒")],-1),rl=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("浏览器第一次请求时，服务器会在响应头中返回请求资源的上次更新时间 "),(0,e._)("code",null,"Last-Modified")]),(0,e._)("li",null,[(0,e.Uk)("当浏览器再次请求时，会在请求头中携带 "),(0,e._)("code",null,"If-Modified-Since"),(0,e.Uk)(" 值为上次请求返回的 "),(0,e._)("code",null,"Last-Modified")]),(0,e._)("li",null,[(0,e.Uk)("服务器收到请求后，会根据请求头中的 "),(0,e._)("code",null,"If-Modified-Since"),(0,e.Uk)(" 和该资源在服务器的最后被修改时间做对比 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("大于 "),(0,e._)("code",null,"If-Modified-Since"),(0,e.Uk)(" 重新返回资源文件，状态码为 200")]),(0,e._)("li",null,[(0,e.Uk)("小于 "),(0,e._)("code",null,"If-Modified-Since"),(0,e.Uk)(" 资源无更新继续使用缓存文件，状态码为 304")])])])],-1),tl=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"Last-Modified 存在的问题"),(0,e._)("ul",null,[(0,e._)("li",null,"时间精度为秒级会出现误差情况，对文件修改精度有严格要求的场景不能满足"),(0,e._)("li",null,"在集群服务器上各个服务器上的文件时间可能不同"),(0,e._)("li",null,"如果用旧文件覆盖新文件，因为时间更前浏览器不会请求旧文件"),(0,e._)("li",null,"编辑了文件但未修改，会导致缓存失效")])],-1),Dl=(0,e._)("h4",{id:"etag-和-if-none-match",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#etag-和-if-none-match","aria-hidden":"true"},"#"),(0,e.Uk)(" ETag 和 If-None-Match")],-1),pl=(0,e._)("p",null,[(0,e._)("code",null,"ETag"),(0,e.Uk)(" 是服务器通过算法对资源内容计算出的一个唯一标识（文件 "),(0,e._)("code",null,"hash"),(0,e.Uk)("）其有强弱之分")],-1),il=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("强 "),(0,e._)("code",null,"Etag"),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,'ETag: "<etag_value>"')]),(0,e._)("li",null,"资源发生任何改变都会立刻更新"),(0,e._)("li",null,"难生成，利于比较")])]),(0,e._)("li",null,[(0,e.Uk)("弱 "),(0,e._)("code",null,"Etag"),(0,e.Uk)("（使用 "),(0,e._)("code",null,"W/"),(0,e.Uk)(" 标识） "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,'ETag: W/"<etag_value>"')]),(0,e._)("li",null,"只在资源发生本质变化时更新"),(0,e._)("li",null,"易生成，不利于比较")])])],-1),ul=(0,e._)("h5",{id:"过程",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#过程","aria-hidden":"true"},"#"),(0,e.Uk)(" 过程")],-1),yl=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("浏览器第一次请求时，服务器会在响应头中返回当前资源文件的一个唯一标识 "),(0,e._)("code",null,"ETag")]),(0,e._)("li",null,[(0,e.Uk)("当浏览器再次请求时，会在请求头中携带 "),(0,e._)("code",null,"If-None-Match"),(0,e.Uk)(" 值为上次请求返回的 "),(0,e._)("code",null,"ETag")]),(0,e._)("li",null,[(0,e.Uk)("通过接收的 "),(0,e._)("code",null,"ETag"),(0,e.Uk)(" 和服务器重新生成的 "),(0,e._)("code",null,"ETag"),(0,e.Uk)(" 进行对比 "),(0,e._)("ul",null,[(0,e._)("li",null,"不一致 重新返回资源文件，状态码为 200"),(0,e._)("li",null,"一致 资源无更新继续使用缓存文件，状态码为 304")])])],-1),dl=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"Last-Modified 和 Etag 对比"),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("精确度上："),(0,e._)("code",null,"Etag"),(0,e.Uk)(" 优于 "),(0,e._)("code",null,"Last-Modified")]),(0,e._)("li",null,[(0,e.Uk)("性能上："),(0,e._)("code",null,"Etag < Last-Modified"),(0,e.Uk)(" 每次生成 "),(0,e._)("code",null,"ETag"),(0,e.Uk)(" 都需要进行读写操作，而 "),(0,e._)("code",null,"Last-Modified"),(0,e.Uk)(" 只需要读取操作")]),(0,e._)("li",null,[(0,e.Uk)("优先级：服务器校验优先考虑 "),(0,e._)("code",null,"Etag")])])],-1),Cl=(0,e._)("h3",{id:"应用场景",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#应用场景","aria-hidden":"true"},"#"),(0,e.Uk)(" 应用场景")],-1),kl=(0,e._)("table",null,[(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th",null,"强缓存"),(0,e._)("th",null,"协商缓存")])]),(0,e._)("tbody",null,[(0,e._)("tr",null,[(0,e._)("td",null,[(0,e.Uk)("不常变化的文件"),(0,e._)("br"),(0,e.Uk)("带 hash 值的 css js 图片")]),(0,e._)("td",null,[(0,e.Uk)("频繁变动的文件"),(0,e._)("br"),(0,e.Uk)("html 文件")])])])],-1),Ul=(0,e._)("h3",{id:"用户行为对缓存的影响",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#用户行为对缓存的影响","aria-hidden":"true"},"#"),(0,e.Uk)(" 用户行为对缓存的影响")],-1),bl=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("地址栏输入 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("查找 "),(0,e._)("code",null,"disk cache"),(0,e.Uk)("（磁盘缓存）中是否有匹配，有则使用缓存，没有则发送网络请求")])])]),(0,e._)("li",null,[(0,e.Uk)("普通刷新（F5） "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("因为浏览器 "),(0,e._)("code",null,"tab"),(0,e.Uk)(" 标签并没有关闭，因此 "),(0,e._)("code",null,"memory cache"),(0,e.Uk)(" （内存缓存）是可用的，会被优先使用，其次使用 "),(0,e._)("code",null,"disk cache"),(0,e.Uk)("（磁盘缓存）")]),(0,e._)("li",null,"跳过强缓存规则，直接走协商缓存")])]),(0,e._)("li",null,[(0,e.Uk)("强制刷新（Ctrl + F5） "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("浏览器不使用缓存，因此发送的请求头部均带有 "),(0,e._)("code",null,"Cache-control: no-cache"),(0,e.Uk)(" （为了兼容还带了 "),(0,e._)("code",null,"Pragma: no-cache"),(0,e.Uk)("）服务器直接返回 200 和最新内容。")]),(0,e._)("li",null,"跳过所有缓存规则")])])],-1),ml=(0,e._)("h2",{id:"浏览器存储",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#浏览器存储","aria-hidden":"true"},"#"),(0,e.Uk)(" 浏览器存储")],-1),hl=(0,e._)("h3",{id:"cookie",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#cookie","aria-hidden":"true"},"#"),(0,e.Uk)(" Cookie")],-1),El=(0,e._)("p",null,[(0,e._)("code",null,"Cookie"),(0,e.Uk)("（也叫 "),(0,e._)("code",null,"Web Cookie"),(0,e.Uk)(" 或浏览器 "),(0,e._)("code",null,"Cookie"),(0,e.Uk)("）是服务器发送到用户浏览器并保存在本地的一小块数据，它会在浏览器下次向同一服务器再发起请求时被携带并发送到服务器上。通常，它用于告知服务端两个请求是否来自同一浏览器，如保持用户的登录状态。"),(0,e._)("code",null,"Cookie"),(0,e.Uk)(" 使基于无状态的 "),(0,e._)("code",null,"HTTP"),(0,e.Uk)(" 协议记录稳定的状态信息成为了可能，"),(0,e._)("code",null,"Cookie"),(0,e.Uk)(" 在存储时是以键值对的形式存在的")],-1),gl=(0,e._)("p",null,[(0,e._)("code",null,"Cookie"),(0,e.Uk)(" 主要用于以下三个方面：")],-1),Al=(0,e._)("ul",null,[(0,e._)("li",null,"会话状态管理（如用户登录状态、购物车、游戏分数或其它需要记录的信息）"),(0,e._)("li",null,"个性化设置（如用户自定义设置、主题等）"),(0,e._)("li",null,"浏览器行为跟踪（如跟踪分析用户行为等）")],-1),Fl=(0,e._)("p",null,[(0,e._)("code",null,"Cookie"),(0,e.Uk)(" 的本职工作并非本地存储，而是“维持状态”，因当时并没有其它合适的存储办法而作为唯一的存储手段，所以会用其进行本地存储")],-1),fl=(0,e._)("h4",{id:"cookie-的生成和使用",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#cookie-的生成和使用","aria-hidden":"true"},"#"),(0,e.Uk)(" Cookie 的生成和使用")],-1),Sl=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("服务器生成，通过 "),(0,e._)("code",null,"http response header"),(0,e.Uk)(" 中的 "),(0,e._)("code",null,"set-cookie")]),(0,e._)("li",null,[(0,e.Uk)("在 "),(0,e._)("code",null,"JavaScript"),(0,e.Uk)(" 中使用 "),(0,e._)("code",null,"document.cookie"),(0,e.Uk)(" 进行读写")])],-1),xl=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"/* 读取 */")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9CDCFE"}},"document"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"cookie")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"/* 写入 */")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9CDCFE"}},"document"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"cookie"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#CE9178"}},"'name=maomao'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br")])],-1),vl=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"Cookie 的缺点"),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Cookie"),(0,e.Uk)(" 最大只能有 "),(0,e._)("code",null,"4KB"),(0,e.Uk)(" 同时大多数浏览器对一个站点的 "),(0,e._)("code",null,"Cookie"),(0,e.Uk)(" 个数也是有限制的")]),(0,e._)("li",null,[(0,e.Uk)("同一个域名下的所有请求都会携带 "),(0,e._)("code",null,"Cookie"),(0,e.Uk)(" 从而带来不必要的开销和安全问题")])])],-1),jl=(0,e._)("h3",{id:"web-storage",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#web-storage","aria-hidden":"true"},"#"),(0,e.Uk)(" Web Storage")],-1),Ol={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API",target:"_blank",rel:"noopener noreferrer"},Il=(0,e.Uk)("Web Storage"),wl=(0,e.Uk)("是 "),Tl=(0,e._)("code",null,"HTML5",-1),Rl=(0,e.Uk)(" 专门为浏览器存储而提供的数据存储机制，其大小限制为 "),Ml=(0,e._)("code",null,"5MB ~ 10MB",-1),Pl=(0,e.Uk)("，数据仅保存在客户端不与服务器进行通信"),Bl=(0,e._)("p",null,[(0,e._)("code",null,"Web Storage"),(0,e.Uk)(" 提供了两种机制供我们使用")],-1),Ll=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Local Storage"),(0,e.Uk)("(本地存储)")]),(0,e._)("li",null,[(0,e._)("code",null,"Session Storage"),(0,e.Uk)("(会话存储)")])],-1),ql=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"LocalStorage"),(0,e._)("ul",null,[(0,e._)("li",null,"保存的数据长期存在"),(0,e._)("li",null,"在同源的所有标签页和窗口之间共享数据")])],-1),Wl=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"SessionStorage"),(0,e._)("ul",null,[(0,e._)("li",null,"数据只存在于当前浏览器的标签页"),(0,e._)("li",null,[(0,e._)("strong",null,"在新标签或窗口打开一个页面时会复制顶级浏览会话的上下文作为新会话的上下文"),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("在当前页面中打开一个同域下的新页面时会复制当前的标签页的 "),(0,e._)("code",null,"SessionStorage"),(0,e.Uk)(" 数据")])])]),(0,e._)("li",null,"重新加载或恢复页面仍会保持原来的数据"),(0,e._)("li",null,"关闭对应浏览器标签或窗口后数据会被清除")])],-1),Hl=(0,e._)("h4",{id:"api-使用",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#api-使用","aria-hidden":"true"},"#"),(0,e.Uk)(" API 使用")],-1),Nl=(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e.Uk)("以 "),(0,e._)("code",null,"localStorage"),(0,e.Uk)(" 为例")])],-1),Jl=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"/* 存储数据 setItem() */")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9CDCFE"}},"localStorage"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"setItem"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'name'"),(0,e._)("span",{style:{color:"#D4D4D4"}},", "),(0,e._)("span",{style:{color:"#CE9178"}},"'maomao'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"/* 读取数据 getItem() */")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9CDCFE"}},"localStorage"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"getItem"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'name'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"/* 删除指定数据 removeItem() */")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9CDCFE"}},"localStorage"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"removeItem"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'name'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"/* 清空数据 clear() */")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9CDCFE"}},"localStorage"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"clear"),(0,e._)("span",{style:{color:"#D4D4D4"}},"()")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br")])],-1),zl=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"sessionStorage localStorage 和 cookie 的区别"),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("相同点 "),(0,e._)("ul",null,[(0,e._)("li",null,"都是在客户端保存数据"),(0,e._)("li",null,"存储数据的类型都是字符串")])]),(0,e._)("li",null,[(0,e.Uk)("不同点 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("生命周期 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Cookie"),(0,e.Uk)(": 可以设置失效时间(默认是关闭浏览器后失效)")]),(0,e._)("li",null,[(0,e._)("code",null,"localStorage"),(0,e.Uk)(": 除非被手动清除否则将会永久保存")]),(0,e._)("li",null,[(0,e._)("code",null,"sessionStorage"),(0,e.Uk)(": 仅在当前浏览器的标签页下有效，关闭标签或窗口后就会被清除")])])]),(0,e._)("li",null,[(0,e.Uk)("数据大小 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Cookie"),(0,e.Uk)(": 4KB")]),(0,e._)("li",null,[(0,e._)("code",null,"localStorage"),(0,e.Uk)(" 和 "),(0,e._)("code",null,"sessionStorage"),(0,e.Uk)(": "),(0,e._)("code",null,"5MB ~ 10MB")])])]),(0,e._)("li",null,[(0,e.Uk)("http 请求 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Cookie"),(0,e.Uk)(": 每次都会携带在 "),(0,e._)("code",null,"HTTP"),(0,e.Uk)(" 请求头中")]),(0,e._)("li",null,[(0,e._)("code",null,"localStorage"),(0,e.Uk)(" 和 "),(0,e._)("code",null,"sessionStorage"),(0,e.Uk)(": 仅在客户储保存不会与服务器通信")])])])])])])],-1),Xl=(0,e._)("h3",{id:"indexeddb",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#indexeddb","aria-hidden":"true"},"#"),(0,e.Uk)(" IndexedDB")],-1),$l={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API",target:"_blank",rel:"noopener noreferrer"},Gl=(0,e.Uk)("IndexedDB"),Kl=(0,e.Uk)(" 是一个运行在浏览器上的非关系型数据库，用于"),Zl=(0,e._)("strong",null,"在客户端存储大量结构化数据",-1),Ql=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"IndexedDB 的特点"),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("存储空间大(一般来说不少于 "),(0,e._)("code",null,"250MB"),(0,e.Uk)(" 甚至没有上限)")]),(0,e._)("li",null,[(0,e.Uk)("支持存储二进制数据("),(0,e._)("code",null,"ArrayBuffer"),(0,e.Uk)(" 和 "),(0,e._)("code",null,"Blob"),(0,e.Uk)(")")]),(0,e._)("li",null,"键值对储存"),(0,e._)("li",null,"同源限制"),(0,e._)("li",null,"执行的操作是异步执行，以免阻塞应用程序"),(0,e._)("li",null,"是一个事务型数据库系统")])],-1),Yl=(0,e._)("h4",{id:"api-使用-1",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#api-使用-1","aria-hidden":"true"},"#"),(0,e.Uk)(" API 使用")],-1),Vl=(0,e._)("p",null,"打开/创建一个 IndexedDB 数据库，并指定数据库的版本号 (版本号只能为整数)",-1),ls=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"request"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"window"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"indexedDB"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"open"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'myDatabase'"),(0,e._)("span",{style:{color:"#D4D4D4"}},", "),(0,e._)("span",{style:{color:"#B5CEA8"}},"1"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"let"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#9CDCFE"}},"db")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"// 成功回调")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9CDCFE"}},"request"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"onsuccess"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#569CD6"}},"function"),(0,e._)("span",{style:{color:"#D4D4D4"}}," ("),(0,e._)("span",{style:{color:"#9CDCFE"}},"event"),(0,e._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#6A9955"}},"// 获取 indexedDB 实例")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"db"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"event"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"target"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"result")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#6A9955"}},"// 也可以使用 request.result 获取 indexedDB 实例")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"console"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"log"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'连接 IndexedDB 成功'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"// 失败回调")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9CDCFE"}},"request"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"onerror"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#569CD6"}},"function"),(0,e._)("span",{style:{color:"#D4D4D4"}}," () {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"console"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"log"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'连接 IndexedDB 失败'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br")])],-1),ss=(0,e._)("p",null,"创建一个对象仓库(类似于数据库中的表)",-1),ns=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"// upgradeneeded 事件会在初始化数据库或版本发生更新时被调用")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9CDCFE"}},"request"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"onupgradeneeded"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#569CD6"}},"function"),(0,e._)("span",{style:{color:"#D4D4D4"}}," ("),(0,e._)("span",{style:{color:"#9CDCFE"}},"event"),(0,e._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"db"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"event"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"target"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"result")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#6A9955"}},"// 创建对象仓库并指定主键")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"db"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"createObjectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'userInfo'"),(0,e._)("span",{style:{color:"#D4D4D4"}},", {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#9CDCFE"}},"keyPath:"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#CE9178"}},"'id'"),(0,e._)("span",{style:{color:"#D4D4D4"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#9CDCFE"}},"autoIncrement:"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#569CD6"}},"false")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  })")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"console"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"log"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'创建对象仓库成功'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#6A9955"}},"/**")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"   * 定义存储对象的数据项")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"   * 第一个参数是创建的索引名称，可以为空")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"   * 第二个参数是索引使用的关键名称，可以为空")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"   * 第三个参数是可选配置参数，可以不传，常用参数之一就是 unique ，表示该字段是否唯一，不能重复")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"   */")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"createIndex"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'id'"),(0,e._)("span",{style:{color:"#D4D4D4"}},", "),(0,e._)("span",{style:{color:"#CE9178"}},"'id'"),(0,e._)("span",{style:{color:"#D4D4D4"}},", {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#9CDCFE"}},"unique:"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#569CD6"}},"true")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  })")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"createIndex"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'name'"),(0,e._)("span",{style:{color:"#D4D4D4"}},", "),(0,e._)("span",{style:{color:"#CE9178"}},"'name'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br")])],-1),es=(0,e._)("p",null,"添加数据",-1),os=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"// 创建事务指并定表格名称和读写权限")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"transaction"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"db"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"transaction"),(0,e._)("span",{style:{color:"#D4D4D4"}},"(["),(0,e._)("span",{style:{color:"#CE9178"}},"'userInfo'"),(0,e._)("span",{style:{color:"#D4D4D4"}},"], "),(0,e._)("span",{style:{color:"#CE9178"}},"'readwrite'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"// 获取 Object Store 对象")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"transaction"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'userInfo'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#6A9955"}},"/* 添加数据 */")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9CDCFE"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"add"),(0,e._)("span",{style:{color:"#D4D4D4"}},"({ "),(0,e._)("span",{style:{color:"#9CDCFE"}},"id:"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#B5CEA8"}},"1"),(0,e._)("span",{style:{color:"#D4D4D4"}},", "),(0,e._)("span",{style:{color:"#9CDCFE"}},"name:"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#CE9178"}},"'test'"),(0,e._)("span",{style:{color:"#D4D4D4"}}," })")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br")])],-1),as=(0,e._)("p",null,"获取数据",-1),_s=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"transaction"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"db"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"transaction"),(0,e._)("span",{style:{color:"#D4D4D4"}},"(["),(0,e._)("span",{style:{color:"#CE9178"}},"'userInfo'"),(0,e._)("span",{style:{color:"#D4D4D4"}},"], "),(0,e._)("span",{style:{color:"#CE9178"}},"'readonly'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"transaction"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'userInfo'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"objectStoreRequest"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"get"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#B5CEA8"}},"1"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9CDCFE"}},"objectStoreRequest"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"onsuccess"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#569CD6"}},"function"),(0,e._)("span",{style:{color:"#D4D4D4"}}," () {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"console"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"log"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'获取数据'"),(0,e._)("span",{style:{color:"#D4D4D4"}},", "),(0,e._)("span",{style:{color:"#9CDCFE"}},"objectStoreRequest"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"result"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br")])],-1),cs=(0,e._)("p",null,"修改数据",-1),rs=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"transaction"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"db"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"transaction"),(0,e._)("span",{style:{color:"#D4D4D4"}},"(["),(0,e._)("span",{style:{color:"#CE9178"}},"'userInfo'"),(0,e._)("span",{style:{color:"#D4D4D4"}},"], "),(0,e._)("span",{style:{color:"#CE9178"}},"'readwrite'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"transaction"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'userInfo'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"objectStoreRequest"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"get"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#B5CEA8"}},"1"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9CDCFE"}},"objectStoreRequest"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"onsuccess"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#569CD6"}},"function"),(0,e._)("span",{style:{color:"#D4D4D4"}}," () {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"data"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"objectStoreRequest"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"result")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"data"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"name"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#CE9178"}},"'maomao'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"put"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"data"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br")])],-1),ts=(0,e._)("p",null,"删除数据",-1),Ds=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"transaction"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"db"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"transaction"),(0,e._)("span",{style:{color:"#D4D4D4"}},"(["),(0,e._)("span",{style:{color:"#CE9178"}},"'userInfo'"),(0,e._)("span",{style:{color:"#D4D4D4"}},"], "),(0,e._)("span",{style:{color:"#CE9178"}},"'readwrite'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"transaction"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'userInfo'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"objectStoreRequest"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"objectStore"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"delete"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#B5CEA8"}},"1"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9CDCFE"}},"objectStoreRequest"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"onsuccess"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#569CD6"}},"function"),(0,e._)("span",{style:{color:"#D4D4D4"}}," () {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"console"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"log"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'删除成功'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br")])],-1),ps={class:"custom-container tip"},is=(0,e._)("p",{class:"custom-container-title"},"在日常开发中可以使用如下类库简化代码量",-1),us={href:"https://github.com/localForage/localForage",target:"_blank",rel:"noopener noreferrer"},ys=(0,e.Uk)("localForage"),ds=(0,e.Uk)(" 一个提供 "),Cs=(0,e._)("code",null,"name:value",-1),ks=(0,e.Uk)(" 的简单语法的客户端数据存储垫片，基于 "),Us=(0,e._)("code",null,"IndexedDB",-1),bs=(0,e.Uk)(" 实现，并在不持支 "),ms=(0,e._)("code",null,"IndexedDB",-1),hs=(0,e.Uk)(" 的浏览器中自动回退到 "),Es=(0,e._)("code",null,"WebSQL",-1),gs=(0,e.Uk)(" 和 "),As=(0,e._)("code",null,"localStorage",-1),Fs={href:"https://github.com/dexie/Dexie.js",target:"_blank",rel:"noopener noreferrer"},fs=(0,e.Uk)("Dexie.js"),Ss=(0,e.Uk)(" 对 "),xs=(0,e._)("code",null,"IndexedDB",-1),vs=(0,e.Uk)(" 的封装，通过提供更友好和简单语法进行快速的编码开发"),js={href:"https://github.com/pouchdb/pouchdb",target:"_blank",rel:"noopener noreferrer"},Os=(0,e.Uk)("PouchDB"),Is=(0,e.Uk)(" 对 "),ws=(0,e._)("code",null,"IndexedDB",-1),Ts=(0,e.Uk)(" 的封装，通过提供更友好和简单语法进行快速的编码开发"),Rs={},Ms=(0,n(3744).Z)(Rs,[["render",function(l,s){const n=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[a,_,(0,e._)("div",c,[r,(0,e._)("p",null,[(0,e._)("a",t,[D,(0,e.Wm)(n)]),p,i,u]),y]),d,C,k,U,(0,e._)("p",null,[(0,e._)("a",b,[m,(0,e.Wm)(n)]),h,(0,e._)("a",E,[g,(0,e.Wm)(n)]),A,F,f,S,x]),v,j,O,I,w,T,R,M,P,B,L,q,W,(0,e._)("p",null,[(0,e._)("a",H,[N,(0,e.Wm)(n)])]),J,z,X,$,G,K,(0,e._)("p",null,[(0,e._)("a",Z,[Q,(0,e.Wm)(n)])]),Y,V,ll,sl,nl,el,ol,al,_l,cl,rl,tl,Dl,pl,il,ul,yl,dl,Cl,kl,Ul,bl,ml,hl,El,gl,Al,Fl,fl,Sl,xl,vl,jl,(0,e._)("p",null,[(0,e._)("a",Ol,[Il,(0,e.Wm)(n)]),wl,Tl,Rl,Ml,Pl]),Bl,Ll,ql,Wl,Hl,Nl,Jl,zl,Xl,(0,e._)("p",null,[(0,e._)("a",$l,[Gl,(0,e.Wm)(n)]),Kl,Zl]),Ql,Yl,Vl,ls,ss,ns,es,os,as,_s,cs,rs,ts,Ds,(0,e._)("div",ps,[is,(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("a",us,[ys,(0,e.Wm)(n)]),ds,Cs,ks,Us,bs,ms,hs,Es,gs,As]),(0,e._)("li",null,[(0,e._)("a",Fs,[fs,(0,e.Wm)(n)]),Ss,xs,vs]),(0,e._)("li",null,[(0,e._)("a",js,[Os,(0,e.Wm)(n)]),Is,ws,Ts])])])],64)}]])},3744:(l,s)=>{s.Z=(l,s)=>{const n=l.__vccOpts||l;for(const[l,e]of s)n[l]=e;return n}},809:(l,s,n)=>{l.exports=n.p+"assets/img/cors-process.48608d9b.png"}}]);