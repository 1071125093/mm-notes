"use strict";(self.webpackChunkmm_notes=self.webpackChunkmm_notes||[]).push([[804],{7592:(l,s,n)=>{n.r(s),n.d(s,{data:()=>e});const e={key:"v-4dbb1ce4",path:"/interview/browser/",title:"浏览器知识",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"跨域",slug:"跨域",children:[{level:3,title:"常用的跨域解决方案",slug:"常用的跨域解决方案",children:[]},{level:3,title:"CORS 跨源资源共享",slug:"cors-跨源资源共享",children:[]},{level:3,title:"JSONP",slug:"jsonp",children:[]}]}],filePathRelative:"interview/browser/README.md",git:{updatedTime:1655298149e3}}},4221:(l,s,n)=>{n.r(s),n.d(s,{default:()=>V});var e=n(6252),o=n(809);const a=(0,e._)("h1",{id:"浏览器知识",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#浏览器知识","aria-hidden":"true"},"#"),(0,e.Uk)(" 浏览器知识")],-1),c=(0,e._)("h2",{id:"跨域",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#跨域","aria-hidden":"true"},"#"),(0,e.Uk)(" 跨域")],-1),_={class:"custom-container tip"},r=(0,e._)("p",{class:"custom-container-title"},"跨域的原因 —— 浏览器的同源策略",-1),t={href:"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy",target:"_blank",rel:"noopener noreferrer"},D=(0,e.Uk)("同源策略"),p=(0,e.Uk)("是浏览器一个重要的安全策略，它用于限制一个 "),u=(0,e._)("code",null,"origin",-1),i=(0,e.Uk)(" 的文档或者它加载的脚本如何能与另一个源的资源进行交互。它能帮助阻隔恶意文档，减少可能被攻击的媒介"),y=(0,e._)("p",null,[(0,e.Uk)("同源的定义是两个 "),(0,e._)("code",null,"URL"),(0,e.Uk)(" 的 "),(0,e._)("strong",null,"协议"),(0,e.Uk)("、"),(0,e._)("strong",null,"域名"),(0,e.Uk)("(子域名 + 主域名)、"),(0,e._)("strong",null,"端口号"),(0,e.Uk)(" 都相同，否则就会出现跨域")],-1),C=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"同源策略的限制范围"),(0,e._)("ol",null,[(0,e._)("li",null,[(0,e.Uk)("限制跨源网络访问: "),(0,e._)("code",null,"AJAX"),(0,e.Uk)(" 请求不能发送")]),(0,e._)("li",null,[(0,e.Uk)("限制跨源脚本 "),(0,e._)("code",null,"API"),(0,e.Uk)(" 访问: "),(0,e._)("code",null,"DOM"),(0,e.Uk)(" 无法获得")]),(0,e._)("li",null,[(0,e.Uk)("限制跨源数据存储访问: "),(0,e._)("code",null,"Cookie"),(0,e.Uk)(),(0,e._)("code",null,"LocalStorage"),(0,e.Uk)(" 和 "),(0,e._)("code",null,"IndexDB"),(0,e.Uk)(" 无法读取")])]),(0,e._)("p",null,"一般常说的跨域指网络跨域")],-1),d=(0,e._)("h3",{id:"常用的跨域解决方案",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#常用的跨域解决方案","aria-hidden":"true"},"#"),(0,e.Uk)(" 常用的跨域解决方案")],-1),k=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"常用的跨域解决方案"),(0,e._)("ol",null,[(0,e._)("li",null,[(0,e._)("strong",null,"CORS")]),(0,e._)("li",null,[(0,e._)("strong",null,"JSONP")]),(0,e._)("li",null,"Nginx 反向代理"),(0,e._)("li",null,"WebSocket"),(0,e._)("li",null,"postMessage"),(0,e._)("li",null,"document.domain")])],-1),U=(0,e._)("h3",{id:"cors-跨源资源共享",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#cors-跨源资源共享","aria-hidden":"true"},"#"),(0,e.Uk)(" CORS 跨源资源共享")],-1),b={href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS",target:"_blank",rel:"noopener noreferrer"},m=(0,e.Uk)("CORS (跨源资源共享)"),h=(0,e.Uk)(" 是 "),E={href:"https://developer.mozilla.org/zh-CN/docs/Glossary/HTTP",target:"_blank",rel:"noopener noreferrer"},A=(0,e.Uk)("HTTP"),g=(0,e.Uk)(" 的一部分，它允许浏览器向跨源服务器发出 "),O=(0,e._)("code",null,"XMLHttpRequest",-1),F=(0,e.Uk)(" 请求，从而解决了 "),S=(0,e._)("code",null,"AJAX",-1),f=(0,e.Uk)(" 只能同源使用的限制。"),R=(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e._)("code",null,"CORS"),(0,e.Uk)(" 需要浏览器和服务器同时支持，目前所有浏览器均已支持，只需服务器配置即可使用")])],-1),w=(0,e._)("p",null,[(0,e.Uk)("浏览器将 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求分成两类: "),(0,e._)("strong",null,"简单请求"),(0,e.Uk)("和"),(0,e._)("strong",null,"非简单请求")],-1),v=(0,e._)("h4",{id:"简单请求",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#简单请求","aria-hidden":"true"},"#"),(0,e.Uk)(" 简单请求")],-1),P=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"简单请求必须同时满足以下条件"),(0,e._)("blockquote",null,[(0,e._)("p",null,"日常开发只会关注前两点")]),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("请求方法是以下三种方法之一 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"HEAD")]),(0,e._)("li",null,[(0,e._)("code",null,"GET")]),(0,e._)("li",null,[(0,e._)("code",null,"POST")])])]),(0,e._)("li",null,[(0,e.Uk)("只使用了如下的安全首部字段，不得人为设置其他首部字段 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Accept")]),(0,e._)("li",null,[(0,e._)("code",null,"Accept-Language")]),(0,e._)("li",null,[(0,e._)("code",null,"Content-Language")]),(0,e._)("li",null,[(0,e._)("code",null,"Content-Type"),(0,e.Uk)(" 仅限以下三种 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"application/x-www-form-urlencoded")]),(0,e._)("li",null,[(0,e._)("code",null,"multipart/form-data")]),(0,e._)("li",null,[(0,e._)("code",null,"text/plain")])])])])]),(0,e._)("li",null,[(0,e.Uk)("请求中的任意 "),(0,e._)("code",null,"XMLHttpRequestUpload"),(0,e.Uk)(" 对象均没有注册任何事件监听器(使用 "),(0,e._)("code",null,"XMLHttpRequest.upload"),(0,e.Uk)(" 属性访问"),(0,e._)("code",null,"XMLHttpRequestUpload"),(0,e.Uk)(" 对象)")]),(0,e._)("li",null,[(0,e.Uk)("请求中没有使用 "),(0,e._)("code",null,"ReadableStream"),(0,e.Uk)(" 对象")])])],-1),T=(0,e._)("h5",{id:"简单请求基本流程",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#简单请求基本流程","aria-hidden":"true"},"#"),(0,e.Uk)(" 简单请求基本流程")],-1),x=(0,e._)("ol",null,[(0,e._)("li",null,[(0,e.Uk)("浏览器会直接发出 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求并在请求头信息之中增加一个 "),(0,e._)("code",null,"Origin"),(0,e.Uk)(" 字段(用来说明本次请求来自哪个源(协议 + 域名 + 端口))")]),(0,e._)("li",null,[(0,e.Uk)("服务器判断 "),(0,e._)("code",null,"Origin"),(0,e.Uk)(" 字段决定是否同意这次请求 "),(0,e._)("ol",null,[(0,e._)("li",null,[(0,e.Uk)("通过请求会在响应头增加 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 相关的字段(以"),(0,e._)("code",null,"Access-Control-"),(0,e.Uk)("开头)")]),(0,e._)("li",null,[(0,e.Uk)("拒绝请求时不会增加 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 相关的字段，浏览器会抛出异常")])])])],-1),H=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"简单请求响应头中的 CORS 字段"),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Origin"),(0,e.Uk)(": 只能是 "),(0,e._)("code",null,"*"),(0,e.Uk)("(接受任意域名的请求)或者是请求时 "),(0,e._)("code",null,"Origin"),(0,e.Uk)(" 字段的值")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Credentials"),(0,e.Uk)("(可选): 是一个布尔值,表示是否允许发送 "),(0,e._)("code",null,"Cookie")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Expose-Headers"),(0,e.Uk)("(可选): "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求时 "),(0,e._)("code",null,"XMLHttpRequest"),(0,e.Uk)(" 对象的 "),(0,e._)("code",null,"getResponseHeader()"),(0,e.Uk)(" 方法只能拿到 6 个基本字段："),(0,e._)("code",null,"Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Pragma"),(0,e.Uk)("。如果想拿到其他字段就必须在 "),(0,e._)("code",null,"Access-Control-Expose-Headers"),(0,e.Uk)(" 里面指定")])])],-1),j=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"CORS 中的 Cookie 设置"),(0,e._)("p",null,[(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求默认不发送 "),(0,e._)("code",null,"Cookie"),(0,e.Uk)("，如果需要发送需要满足如下条件")]),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("服务器必须设置 "),(0,e._)("code",null,"Access-Control-Allow-Credentials: true")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Origin"),(0,e.Uk)(" 字段不能为 "),(0,e._)("code",null,"*")]),(0,e._)("li",null,[(0,e._)("code",null,"AJAX"),(0,e.Uk)(" 请求的配置项需设置 "),(0,e._)("code",null,"withCredentials = true")])])],-1),L=(0,e._)("h4",{id:"非简单请求",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#非简单请求","aria-hidden":"true"},"#"),(0,e.Uk)(" 非简单请求")],-1),N=(0,e._)("p",null,[(0,e.Uk)("非简单请求是那种对服务器有特殊要求的请求，如请求方法是 "),(0,e._)("code",null,"PUT"),(0,e.Uk)(" 或 "),(0,e._)("code",null,"DELETE"),(0,e.Uk)("，或者 "),(0,e._)("code",null,"Content-Type"),(0,e.Uk)(" 字段的类型是 "),(0,e._)("code",null,"application/json"),(0,e.Uk)("。"),(0,e._)("br"),(0,e.Uk)(" 非简单请求会在正式通信之前增加一次 "),(0,e._)("code",null,"HTTP"),(0,e.Uk)(" 查询请求，称为"),(0,e._)("strong",null,"预检请求"),(0,e.Uk)("，用于获取服务器是否允许该实际请求，同时避免跨域请求对服务器的用户数据产生预期之外的影响")],-1),J=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"预检请求"),(0,e._)("p",null,[(0,e.Uk)("预检请求用的请求方法是 "),(0,e._)("code",null,"OPTIONS"),(0,e.Uk)(" 表示这个请求是用来询问的")]),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("在预检请求请求头信息里会包含如下字段 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Origin"),(0,e.Uk)(": 表示本次请求来自哪个源")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Request-Method"),(0,e.Uk)(": 用于列出浏览器的 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求会用到哪些 "),(0,e._)("code",null,"HTTP"),(0,e.Uk)(" 方法")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Request-Headers"),(0,e.Uk)("(可选): 指定浏览器 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求会额外发送的头信息字段")])])]),(0,e._)("li",null,[(0,e.Uk)("服务器通过后会在预检请求响应头中设置如下字段 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Origin")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Credentials"),(0,e.Uk)("(可选)")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Methods"),(0,e.Uk)(": 表示服务器支持的所有跨域请求的方法(为了避免多次预检请求)")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Allow-Headers"),(0,e.Uk)(": 表示服务器支持的所有头信息字段，不限于浏览器在预检中请求的字段")]),(0,e._)("li",null,[(0,e._)("code",null,"Access-Control-Max-Age"),(0,e.Uk)("(可选): 用来指定本次预检请求的有效期单位为秒，在有效期内将不发出另一条预检请求")])])])])],-1),M=(0,e._)("p",null,[(0,e.Uk)("一旦服务器通过了预检请求，以后每次浏览器正常的 "),(0,e._)("code",null,"CORS"),(0,e.Uk)(" 请求，就都跟简单请求一样会有一个 "),(0,e._)("code",null,"Origin"),(0,e.Uk)(" 头信息字段。服务器的回应也都会有一个 "),(0,e._)("code",null,"Access-Control-Allow-Origin"),(0,e.Uk)(" 头信息字段")],-1),q=(0,e._)("details",{class:"custom-container details"},[(0,e._)("summary",null,"CORS 请求过程"),(0,e._)("p",null,[(0,e._)("img",{src:o,alt:"CORS 请求过程"})])],-1),z={href:"http://www.ruanyifeng.com/blog/2016/04/cors.html",target:"_blank",rel:"noopener noreferrer"},X=(0,e.Uk)("参考资料 —— 跨域资源共享 CORS 详解"),W=(0,e._)("h3",{id:"jsonp",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#jsonp","aria-hidden":"true"},"#"),(0,e.Uk)(" JSONP")],-1),$=(0,e._)("p",null,[(0,e._)("code",null,"JSONP"),(0,e.Uk)(" 是利用 "),(0,e._)("code",null,"<script>"),(0,e.Uk)(" 标签没有跨域限制的漏洞，当前源可以得到从其他来源动态产生的 "),(0,e._)("code",null,"JSON"),(0,e.Uk)(" 数据")],-1),B=(0,e._)("p",null,[(0,e._)("strong",null,[(0,e._)("code",null,"JSONP"),(0,e.Uk)(" 请求过程流程")])],-1),G=(0,e._)("ol",null,[(0,e._)("li",null,"前端定义一个解析的回调函数"),(0,e._)("li",null,[(0,e.Uk)("创建 "),(0,e._)("code",null,"script"),(0,e.Uk)(" 标签，其 "),(0,e._)("code",null,"src"),(0,e.Uk)(" 指向接口地址并拼接好参数和回调函数名")]),(0,e._)("li",null,[(0,e.Uk)("后端处理数据并将其拼接到前端传入的回调函数中(拼接好的数据必须是一个合法的 "),(0,e._)("code",null,"JavaScript"),(0,e.Uk)(" 脚本 )")]),(0,e._)("li",null,[(0,e.Uk)("浏览器执行后端返回的 "),(0,e._)("code",null,"JavaScript"),(0,e.Uk)(" 脚本代码(调用定义好的回调函数)并删除刚创建的 "),(0,e._)("code",null,"script"),(0,e.Uk)(" 标签")])],-1),I=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"function"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#DCDCAA"}},"normalizeParams"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"params"),(0,e._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#C586C0"}},"if"),(0,e._)("span",{style:{color:"#D4D4D4"}}," (!"),(0,e._)("span",{style:{color:"#9CDCFE"}},"params"),(0,e._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#C586C0"}},"return"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#CE9178"}},"''")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#C586C0"}},"return"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4EC9B0"}},"Object"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"keys"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"params"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    ."),(0,e._)("span",{style:{color:"#DCDCAA"}},"map"),(0,e._)("span",{style:{color:"#D4D4D4"}},"(("),(0,e._)("span",{style:{color:"#9CDCFE"}},"key"),(0,e._)("span",{style:{color:"#D4D4D4"}},") "),(0,e._)("span",{style:{color:"#569CD6"}},"=>"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#CE9178"}},"`"),(0,e._)("span",{style:{color:"#569CD6"}},"${"),(0,e._)("span",{style:{color:"#9CDCFE"}},"key"),(0,e._)("span",{style:{color:"#569CD6"}},"}"),(0,e._)("span",{style:{color:"#CE9178"}},"="),(0,e._)("span",{style:{color:"#569CD6"}},"${"),(0,e._)("span",{style:{color:"#9CDCFE"}},"params"),(0,e._)("span",{style:{color:"#D4D4D4"}},"["),(0,e._)("span",{style:{color:"#9CDCFE"}},"key"),(0,e._)("span",{style:{color:"#D4D4D4"}},"]"),(0,e._)("span",{style:{color:"#569CD6"}},"}"),(0,e._)("span",{style:{color:"#CE9178"}},"`"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    ."),(0,e._)("span",{style:{color:"#DCDCAA"}},"join"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'&'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#569CD6"}},"function"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#DCDCAA"}},"jsonp"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"url"),(0,e._)("span",{style:{color:"#D4D4D4"}},", "),(0,e._)("span",{style:{color:"#9CDCFE"}},"params"),(0,e._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#C586C0"}},"return"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#569CD6"}},"new"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4EC9B0"}},"Promise"),(0,e._)("span",{style:{color:"#D4D4D4"}},"(("),(0,e._)("span",{style:{color:"#9CDCFE"}},"resolve"),(0,e._)("span",{style:{color:"#D4D4D4"}},") "),(0,e._)("span",{style:{color:"#569CD6"}},"=>"),(0,e._)("span",{style:{color:"#D4D4D4"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"callback"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#CE9178"}},"`jsonp_"),(0,e._)("span",{style:{color:"#569CD6"}},"${"),(0,e._)("span",{style:{color:"#4EC9B0"}},"Date"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"now"),(0,e._)("span",{style:{color:"#D4D4D4"}},"()"),(0,e._)("span",{style:{color:"#569CD6"}},"}"),(0,e._)("span",{style:{color:"#CE9178"}},"`")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#9CDCFE"}},"window"),(0,e._)("span",{style:{color:"#D4D4D4"}},"["),(0,e._)("span",{style:{color:"#9CDCFE"}},"callback"),(0,e._)("span",{style:{color:"#D4D4D4"}},"] = "),(0,e._)("span",{style:{color:"#569CD6"}},"function"),(0,e._)("span",{style:{color:"#D4D4D4"}}," ("),(0,e._)("span",{style:{color:"#9CDCFE"}},"data"),(0,e._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"      "),(0,e._)("span",{style:{color:"#DCDCAA"}},"resolve"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"data"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"      "),(0,e._)("span",{style:{color:"#9CDCFE"}},"document"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"body"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"removeChild"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"scriptEle"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    }")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#9CDCFE"}},"params"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"cb"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"callback")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#569CD6"}},"const"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#4FC1FF"}},"scriptEle"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#9CDCFE"}},"document"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"createElement"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'script'"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#9CDCFE"}},"scriptEle"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"src"),(0,e._)("span",{style:{color:"#D4D4D4"}}," = "),(0,e._)("span",{style:{color:"#CE9178"}},"`"),(0,e._)("span",{style:{color:"#569CD6"}},"${"),(0,e._)("span",{style:{color:"#9CDCFE"}},"url"),(0,e._)("span",{style:{color:"#569CD6"}},"}${"),(0,e._)("span",{style:{color:"#9CDCFE"}},"url"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"includes"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'?'"),(0,e._)("span",{style:{color:"#D4D4D4"}},") ? "),(0,e._)("span",{style:{color:"#CE9178"}},"'&'"),(0,e._)("span",{style:{color:"#D4D4D4"}}," : "),(0,e._)("span",{style:{color:"#CE9178"}},"'?'"),(0,e._)("span",{style:{color:"#569CD6"}},"}${"),(0,e._)("span",{style:{color:"#DCDCAA"}},"normalizeParams"),(0,e._)("span",{style:{color:"#D4D4D4"}},"(")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"      "),(0,e._)("span",{style:{color:"#9CDCFE"}},"params")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    )"),(0,e._)("span",{style:{color:"#569CD6"}},"}"),(0,e._)("span",{style:{color:"#CE9178"}},"`")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"    "),(0,e._)("span",{style:{color:"#9CDCFE"}},"document"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#9CDCFE"}},"body"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"appendChild"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"scriptEle"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  })")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#DCDCAA"}},"jsonp"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#CE9178"}},"'https://www.baidu.com/sugrec'"),(0,e._)("span",{style:{color:"#D4D4D4"}},", {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"prod:"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#CE9178"}},"'pc'"),(0,e._)("span",{style:{color:"#D4D4D4"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"wd:"),(0,e._)("span",{style:{color:"#D4D4D4"}}," "),(0,e._)("span",{style:{color:"#CE9178"}},"'跨域'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"})."),(0,e._)("span",{style:{color:"#DCDCAA"}},"then"),(0,e._)("span",{style:{color:"#D4D4D4"}},"(("),(0,e._)("span",{style:{color:"#9CDCFE"}},"res"),(0,e._)("span",{style:{color:"#D4D4D4"}},") "),(0,e._)("span",{style:{color:"#569CD6"}},"=>"),(0,e._)("span",{style:{color:"#D4D4D4"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"  "),(0,e._)("span",{style:{color:"#9CDCFE"}},"console"),(0,e._)("span",{style:{color:"#D4D4D4"}},"."),(0,e._)("span",{style:{color:"#DCDCAA"}},"log"),(0,e._)("span",{style:{color:"#D4D4D4"}},"("),(0,e._)("span",{style:{color:"#9CDCFE"}},"res"),(0,e._)("span",{style:{color:"#D4D4D4"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D4D4D4"}},"})")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"24"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"25"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"26"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"27"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"28"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"29"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"30"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"31"),(0,e._)("br")])],-1),Z=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"JSONP 跨域优缺点"),(0,e._)("ul",null,[(0,e._)("li",null,"优点: 实现简单，兼容性好"),(0,e._)("li",null,[(0,e.Uk)("缺点 "),(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("只支持 "),(0,e._)("code",null,"GET"),(0,e.Uk)(" 请求")]),(0,e._)("li",null,[(0,e.Uk)("容易遭受 "),(0,e._)("code",null,"XSS"),(0,e.Uk)(" 攻击")])])])])],-1),Y={href:"https://juejin.cn/post/6844904126246027278",target:"_blank",rel:"noopener noreferrer"},K=(0,e.Uk)("了解更多跨域解决方案请点击 —— 10 种跨域解决方案"),Q={},V=(0,n(3744).Z)(Q,[["render",function(l,s){const n=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[a,c,(0,e._)("div",_,[r,(0,e._)("p",null,[(0,e._)("a",t,[D,(0,e.Wm)(n)]),p,u,i]),y]),C,d,k,U,(0,e._)("p",null,[(0,e._)("a",b,[m,(0,e.Wm)(n)]),h,(0,e._)("a",E,[A,(0,e.Wm)(n)]),g,O,F,S,f]),R,w,v,P,T,x,H,j,L,N,J,M,q,(0,e._)("p",null,[(0,e._)("a",z,[X,(0,e.Wm)(n)])]),W,$,B,G,I,Z,(0,e._)("p",null,[(0,e._)("a",Y,[K,(0,e.Wm)(n)])])],64)}]])},3744:(l,s)=>{s.Z=(l,s)=>{const n=l.__vccOpts||l;for(const[l,e]of s)n[l]=e;return n}},809:(l,s,n)=>{l.exports=n.p+"assets/img/cors-process.48608d9b.png"}}]);