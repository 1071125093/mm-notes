"use strict";(self.webpackChunkmm_notes=self.webpackChunkmm_notes||[]).push([[970],{756:(s,l,n)=>{n.r(l),n.d(l,{data:()=>a});const a=JSON.parse('{"key":"v-495eb4c4","path":"/interview/coding/","title":"编程题","lang":"zh-CN","frontmatter":{},"excerpt":"","headers":[{"level":2,"title":"模拟实现系列(造火箭)","slug":"模拟实现系列-造火箭","children":[{"level":3,"title":"new 运算符","slug":"new-运算符","children":[]},{"level":3,"title":"instanceof 运算符","slug":"instanceof-运算符","children":[]},{"level":3,"title":"Object.create()","slug":"object-create","children":[]},{"level":3,"title":"Function.prototype.call()","slug":"function-prototype-call","children":[]},{"level":3,"title":"Function.prototype.apply()","slug":"function-prototype-apply","children":[]},{"level":3,"title":"Function.prototype.bind()","slug":"function-prototype-bind","children":[]}]},{"level":2,"title":"工具方法系列","slug":"工具方法系列","children":[{"level":3,"title":"debounce 函数防抖","slug":"debounce-函数防抖","children":[]},{"level":3,"title":"throttle 函数节流","slug":"throttle-函数节流","children":[]}]}],"git":{"updatedTime":1660049567000},"filePathRelative":"interview/coding/README.md"}')},8942:(s,l,n)=>{n.r(l),n.d(l,{default:()=>ls});var a=n(6252);const e=(0,a.uE)('<h1 id="编程题" tabindex="-1"><a class="header-anchor" href="#编程题" aria-hidden="true">#</a> 编程题</h1><h2 id="模拟实现系列-造火箭" tabindex="-1"><a class="header-anchor" href="#模拟实现系列-造火箭" aria-hidden="true">#</a> 模拟实现系列(造火箭)</h2><h3 id="new-运算符" tabindex="-1"><a class="header-anchor" href="#new-运算符" aria-hidden="true">#</a> new 运算符</h3><div class="custom-container tip"><p class="custom-container-title">new 运算符原理</p><ol><li>创建一个全新的对象</li><li>为新创建的对象添加 <strong><code>__proto__</code></strong> 属性并指向构造函数的原型对象</li><li>将新创建的对象作为函数调用的 this</li><li>如果构造函数没有返回对象类型，则返回新创建的对象</li></ol></div><details class="custom-container details"><summary>模拟实现 new 运算符</summary><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">function</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">myNew</span><span style="color:#D4D4D4;">() {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 获取构造函数</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">Constructor</span><span style="color:#D4D4D4;"> = [].</span><span style="color:#9CDCFE;">shift</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">call</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">arguments</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 创建空对象并设置原型</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">obj</span><span style="color:#D4D4D4;"> = </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">create</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">Constructor</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">prototype</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 绑定 this 并执行构造函数</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">result</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">Constructor</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">apply</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">obj</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">arguments</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 返回构造函数显示返回的值或新对象</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">type</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">typeof</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">result</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">result</span><span style="color:#D4D4D4;"> &amp;&amp; (</span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;"> === </span><span style="color:#CE9178;">&#39;object&#39;</span><span style="color:#D4D4D4;"> || </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;"> === </span><span style="color:#CE9178;">&#39;function&#39;</span><span style="color:#D4D4D4;">) ? </span><span style="color:#9CDCFE;">result</span><span style="color:#D4D4D4;"> : </span><span style="color:#9CDCFE;">obj</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>',5),o={href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new",target:"_blank",rel:"noopener noreferrer"},D=(0,a.Uk)("new 运算符 —— MDN"),p={href:"https://github.com/mqyqingfeng/Blog/issues/13",target:"_blank",rel:"noopener noreferrer"},c=(0,a.Uk)("JavaScript 深入之 new 的模拟实现"),r=(0,a.uE)('<h3 id="instanceof-运算符" tabindex="-1"><a class="header-anchor" href="#instanceof-运算符" aria-hidden="true">#</a> instanceof 运算符</h3><div class="custom-container tip"><p class="custom-container-title">instanceof 运算符原理</p><p><code>instanceof</code> 运算符用于检测构造函数的 <code>prototype</code> 属性是否出现在某个实例对象的原型链上</p></div><details class="custom-container details"><summary>模拟实现 instanceof 运算符</summary><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">function</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">myInstanceof</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">left</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">right</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 取右边构造函数的 prototype 值</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">prototype</span><span style="color:#D4D4D4;"> = </span><span style="color:#4EC9B0;">right</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">prototype</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 取左边实例的 __proto__ 值</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">left</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">left</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">__proto__</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#C586C0;">while</span><span style="color:#D4D4D4;"> (</span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// 当左边实例的 __proto__ 为 null 时返回 false</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">left</span><span style="color:#D4D4D4;"> === </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">false</span></span>\n<span class="line"><span style="color:#D4D4D4;">    }</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// 判断左右两边的原型是否一致</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">left</span><span style="color:#D4D4D4;"> === </span><span style="color:#9CDCFE;">prototype</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">true</span></span>\n<span class="line"><span style="color:#D4D4D4;">    }</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// 修改 __proto__</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">left</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">left</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">__proto__</span></span>\n<span class="line"><span style="color:#D4D4D4;">  }</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>',3),t={href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof",target:"_blank",rel:"noopener noreferrer"},i=(0,a.Uk)("instanceof 运算符 —— MDN"),_=(0,a._)("br",null,null,-1),y={href:"https://juejin.cn/post/6844903613584654344#heading-1",target:"_blank",rel:"noopener noreferrer"},C=(0,a.Uk)("instanceof 操作符的实现原理"),d=(0,a.uE)('<h3 id="object-create" tabindex="-1"><a class="header-anchor" href="#object-create" aria-hidden="true">#</a> Object.create()</h3><div class="custom-container tip"><p class="custom-container-title">Object.create()</p><p><code>Object.create()</code> 方法创建一个新对象，使用现有的对象来提供新创建的对象的 <code>__proto__</code></p></div><details class="custom-container details"><summary>模拟实现 Object.create()</summary><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">function</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">create</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">proto</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">properties</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 如果 proto 不是 null 或非原始包装对象，抛出 TypeError 异常</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">type</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">typeof</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">proto</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;"> !== </span><span style="color:#CE9178;">&#39;object&#39;</span><span style="color:#D4D4D4;"> &amp;&amp; </span><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;"> !== </span><span style="color:#CE9178;">&#39;function&#39;</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">throw</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">TypeError</span><span style="color:#D4D4D4;">(</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#CE9178;">&#39;Object prototype may only be an Object or null: &#39;</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">proto</span></span>\n<span class="line"><span style="color:#D4D4D4;">    )</span></span>\n<span class="line"><span style="color:#D4D4D4;">  }</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">function</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">F</span><span style="color:#D4D4D4;">() {}</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 将 proto 的原型设置为 F 的原型</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#4EC9B0;">F</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">prototype</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">proto</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 创建新对象</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">result</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">F</span><span style="color:#D4D4D4;">()</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 兼容 null 的处理</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">proto</span><span style="color:#D4D4D4;"> === </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">result</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">__proto__</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">null</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// OR Reflect.setPrototypeOf(result, null)</span></span>\n<span class="line"><span style="color:#D4D4D4;">  }</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 将 properties 的属性设置到新对象上</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">properties</span><span style="color:#D4D4D4;"> !== </span><span style="color:#569CD6;">null</span><span style="color:#D4D4D4;"> &amp;&amp; </span><span style="color:#9CDCFE;">properties</span><span style="color:#D4D4D4;"> !== </span><span style="color:#569CD6;">undefined</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#4EC9B0;">Object</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">defineProperties</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">result</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">properties</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">  }</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">result</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>',3),u={href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create",target:"_blank",rel:"noopener noreferrer"},v=(0,a.Uk)("Object.create() —— MDN"),m=(0,a._)("h3",{id:"function-prototype-call",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#function-prototype-call","aria-hidden":"true"},"#"),(0,a.Uk)(" Function.prototype.call()")],-1),b=(0,a._)("p",null,[(0,a._)("code",null,"call()"),(0,a.Uk)(" 方法使用一个指定的 "),(0,a._)("code",null,"this"),(0,a.Uk)(" 值和单独给出的一个或多个参数来调用一个函数")],-1),E={class:"custom-container details"},F=(0,a._)("summary",null,"模拟实现 Function.prototype.call()",-1),k=(0,a._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,a._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,a._)("code",null,[(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#6A9955"}},"/** ES6 实现 **/")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#4EC9B0"}},"Function"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"myCall"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"function"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},", ..."),(0,a._)("span",{style:{color:"#9CDCFE"}},"args"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 在非严格模式下，传入的 context 为 null 或 undefined 时会自动替换为全局对象")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 因此在判断时不能使用 context = context || window")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"if"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}}," == "),(0,a._)("span",{style:{color:"#569CD6"}},"null"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#9CDCFE"}},"window")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 原始值需要被 Object 包装成对象")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"else"),(0,a._)("span",{style:{color:"#D4D4D4"}}," {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#4EC9B0"}},"Object"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"fn"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"this")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 获取 fn 函数调用的返回值")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"const"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#4FC1FF"}},"result"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"fn"),(0,a._)("span",{style:{color:"#D4D4D4"}},"(..."),(0,a._)("span",{style:{color:"#9CDCFE"}},"args"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"delete"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"fn")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"return"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"result")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#569CD6"}},"function"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#DCDCAA"}},"get"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#9CDCFE"}},"params"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#9CDCFE"}},"console"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"log"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#569CD6"}},"this"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#9CDCFE"}},"params"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"return"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#CE9178"}},"'这是返回值'")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#569CD6"}},"const"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#4FC1FF"}},"obj"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#9CDCFE"}},"name:"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#CE9178"}},"'maomao'"),(0,a._)("span",{style:{color:"#D4D4D4"}},",")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#9CDCFE"}},"age:"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#B5CEA8"}},"18")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#9CDCFE"}},"console"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"log"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#CE9178"}},"`call :>> `"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#9CDCFE"}},"get"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"call"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#9CDCFE"}},"obj"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#CE9178"}},"'call'"),(0,a._)("span",{style:{color:"#D4D4D4"}},"))")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#9CDCFE"}},"console"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"log"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#CE9178"}},"`myCall :>> `"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#9CDCFE"}},"get"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"myCall"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#9CDCFE"}},"obj"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#CE9178"}},"'myCall'"),(0,a._)("span",{style:{color:"#D4D4D4"}},"))")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"})])]),(0,a._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"})])],-1),U=(0,a._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,a._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,a._)("code",null,[(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#6A9955"}},"/** ES5 实现 **/")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#4EC9B0"}},"Function"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"myCall"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"function"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 在非严格模式下，传入的 context 为 null 或 undefined 时会自动替换为全局对象")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 因此在判断时不能使用 context = context || window")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"if"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}}," == "),(0,a._)("span",{style:{color:"#569CD6"}},"null"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#9CDCFE"}},"window")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 原始值需要被 Object 包装成对象")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"else"),(0,a._)("span",{style:{color:"#D4D4D4"}}," {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#4EC9B0"}},"Object"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 获取调用 call 的函数")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"fn"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"this")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 获取传入的参数")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"var"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"args"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = []")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// arguments 是类数组对象，可以使用 for 循环")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"for"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#569CD6"}},"var"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"i"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#B5CEA8"}},"1"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#9CDCFE"}},"len"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"arguments"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"length"),(0,a._)("span",{style:{color:"#D4D4D4"}},"; "),(0,a._)("span",{style:{color:"#9CDCFE"}},"i"),(0,a._)("span",{style:{color:"#D4D4D4"}}," < "),(0,a._)("span",{style:{color:"#9CDCFE"}},"len"),(0,a._)("span",{style:{color:"#D4D4D4"}},"; "),(0,a._)("span",{style:{color:"#9CDCFE"}},"i"),(0,a._)("span",{style:{color:"#D4D4D4"}},"++) {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#9CDCFE"}},"args"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"push"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#CE9178"}},"'arguments['"),(0,a._)("span",{style:{color:"#D4D4D4"}}," + "),(0,a._)("span",{style:{color:"#9CDCFE"}},"i"),(0,a._)("span",{style:{color:"#D4D4D4"}}," + "),(0,a._)("span",{style:{color:"#CE9178"}},"']'"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"/**")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#6A9955"}},"   * 获取 fn 函数调用的返回值")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#6A9955"}},"   * 此时 args 为 ['arguments[1]', 'arguments[2]', 'arguments[3]']")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#6A9955"}},"   * 但在执行时 args 会自动调用 Array.toString() 转化为 context.fn(arguments[1], arguments[2], arguments[3])")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#6A9955"}},"   **/")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"var"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"result"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#DCDCAA"}},"eval"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#CE9178"}},"'context.fn('"),(0,a._)("span",{style:{color:"#D4D4D4"}}," + "),(0,a._)("span",{style:{color:"#9CDCFE"}},"args"),(0,a._)("span",{style:{color:"#D4D4D4"}}," + "),(0,a._)("span",{style:{color:"#CE9178"}},"')'"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 删除 fn 函数")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"delete"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"fn")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 将 fn 函数的返回值返回")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"return"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"result")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"})])]),(0,a._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"})])],-1),f={href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call",target:"_blank",rel:"noopener noreferrer"},A=(0,a.Uk)("Function.prototype.call() —— MDN"),h={href:"https://github.com/mqyqingfeng/Blog/issues/11",target:"_blank",rel:"noopener noreferrer"},g=(0,a.Uk)("JavaScript 深入之 call 和 apply 的模拟实现"),x=(0,a._)("h3",{id:"function-prototype-apply",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#function-prototype-apply","aria-hidden":"true"},"#"),(0,a.Uk)(" Function.prototype.apply()")],-1),j=(0,a._)("p",null,[(0,a._)("code",null,"apply()"),(0,a.Uk)(" 方法调用一个具有给定 "),(0,a._)("code",null,"this"),(0,a.Uk)(" 值的函数，以及以一个数组（或类数组对象）的形式提供的参数")],-1),w={class:"custom-container details"},B=(0,a._)("summary",null,"模拟实现 Function.prototype.apply()",-1),O=(0,a._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,a._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,a._)("code",null,[(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#6A9955"}},"/** ES6 实现 **/")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#4EC9B0"}},"Function"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"myApply"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"function"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#9CDCFE"}},"arr"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 在非严格模式下，传入的 context 为 null 或 undefined 时会自动替换为全局对象")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 因此在判断时不能使用 context = context || window")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"if"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}}," == "),(0,a._)("span",{style:{color:"#569CD6"}},"null"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#9CDCFE"}},"window")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 原始值需要被 Object 包装成对象")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"else"),(0,a._)("span",{style:{color:"#D4D4D4"}}," {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#4EC9B0"}},"Object"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"fn"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"this")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 获取函数调用的返回值")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"const"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#4FC1FF"}},"result"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#9CDCFE"}},"arr"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ? "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"fn"),(0,a._)("span",{style:{color:"#D4D4D4"}},"(..."),(0,a._)("span",{style:{color:"#9CDCFE"}},"arr"),(0,a._)("span",{style:{color:"#D4D4D4"}},") : "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"fn"),(0,a._)("span",{style:{color:"#D4D4D4"}},"()")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"delete"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"fn")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"return"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"result")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#569CD6"}},"function"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#DCDCAA"}},"get"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#9CDCFE"}},"params"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#9CDCFE"}},"console"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"log"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#569CD6"}},"this"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#9CDCFE"}},"params"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"return"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#CE9178"}},"'这是返回值'")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#569CD6"}},"const"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#4FC1FF"}},"obj"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#9CDCFE"}},"name:"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#CE9178"}},"'maomao'"),(0,a._)("span",{style:{color:"#D4D4D4"}},",")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#9CDCFE"}},"age:"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#B5CEA8"}},"18")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#9CDCFE"}},"console"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"log"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#CE9178"}},"`apply :>> `"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#9CDCFE"}},"get"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"apply"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#9CDCFE"}},"obj"),(0,a._)("span",{style:{color:"#D4D4D4"}},", ["),(0,a._)("span",{style:{color:"#CE9178"}},"'apply'"),(0,a._)("span",{style:{color:"#D4D4D4"}},"]))")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#9CDCFE"}},"console"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"log"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#CE9178"}},"`myApply :>> `"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#9CDCFE"}},"get"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"myApply"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#9CDCFE"}},"obj"),(0,a._)("span",{style:{color:"#D4D4D4"}},", ["),(0,a._)("span",{style:{color:"#CE9178"}},"'myApply'"),(0,a._)("span",{style:{color:"#D4D4D4"}},"]))")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"})])]),(0,a._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"})])],-1),W=(0,a._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,a._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,a._)("code",null,[(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#6A9955"}},"/** ES5 实现 **/")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#4EC9B0"}},"Function"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"myApply"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"function"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#9CDCFE"}},"arr"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 在非严格模式下，传入的 context 为 null 或 undefined 时会自动替换为全局对象")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 因此在判断时不能使用 context = context || window")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"if"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}}," == "),(0,a._)("span",{style:{color:"#569CD6"}},"null"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#9CDCFE"}},"window")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 原始值需要被 Object 包装成对象")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"else"),(0,a._)("span",{style:{color:"#D4D4D4"}}," {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#4EC9B0"}},"Object"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 获取调用 apply 的函数")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"fn"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"this")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 获取 fn 函数调用的返回值")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"var"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"result")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"if"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#9CDCFE"}},"arr"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#6A9955"}},"// 获取传入的参数")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#569CD6"}},"var"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"args"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = []")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#C586C0"}},"for"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#569CD6"}},"var"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"i"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#B5CEA8"}},"0"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#9CDCFE"}},"len"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#9CDCFE"}},"arr"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"length"),(0,a._)("span",{style:{color:"#D4D4D4"}},"; "),(0,a._)("span",{style:{color:"#9CDCFE"}},"i"),(0,a._)("span",{style:{color:"#D4D4D4"}}," < "),(0,a._)("span",{style:{color:"#9CDCFE"}},"len"),(0,a._)("span",{style:{color:"#D4D4D4"}},"; "),(0,a._)("span",{style:{color:"#9CDCFE"}},"i"),(0,a._)("span",{style:{color:"#D4D4D4"}},"++) {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"      "),(0,a._)("span",{style:{color:"#9CDCFE"}},"args"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"push"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#CE9178"}},"'arr['"),(0,a._)("span",{style:{color:"#D4D4D4"}}," + "),(0,a._)("span",{style:{color:"#9CDCFE"}},"i"),(0,a._)("span",{style:{color:"#D4D4D4"}}," + "),(0,a._)("span",{style:{color:"#CE9178"}},"']'"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#9CDCFE"}},"result"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#DCDCAA"}},"eval"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#CE9178"}},"'context.fn('"),(0,a._)("span",{style:{color:"#D4D4D4"}}," + "),(0,a._)("span",{style:{color:"#9CDCFE"}},"args"),(0,a._)("span",{style:{color:"#D4D4D4"}}," + "),(0,a._)("span",{style:{color:"#CE9178"}},"')'"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 没有参数直接调用")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"else"),(0,a._)("span",{style:{color:"#D4D4D4"}}," {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#9CDCFE"}},"result"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"fn"),(0,a._)("span",{style:{color:"#D4D4D4"}},"()")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 删除 fn 函数")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"delete"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"fn")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 将 fn 的返回值返回")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"return"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"result")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"})])]),(0,a._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"})])],-1),S={href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply",target:"_blank",rel:"noopener noreferrer"},N=(0,a.Uk)("Function.prototype.apply() —— MDN"),z={href:"https://github.com/mqyqingfeng/Blog/issues/11",target:"_blank",rel:"noopener noreferrer"},J=(0,a.Uk)("JavaScript 深入之 call 和 apply 的模拟实现"),R=(0,a._)("h3",{id:"function-prototype-bind",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#function-prototype-bind","aria-hidden":"true"},"#"),(0,a.Uk)(" Function.prototype.bind()")],-1),T=(0,a._)("p",null,[(0,a._)("code",null,"bind()"),(0,a.Uk)(" 方法创建一个新的函数，在 "),(0,a._)("code",null,"bind()"),(0,a.Uk)(" 被调用时，这个新函数的 "),(0,a._)("code",null,"this"),(0,a.Uk)(" 被指定为 "),(0,a._)("code",null,"bind()"),(0,a.Uk)(" 的第一个参数，而其余参数将作为新函数的参数供调用时使用。")],-1),q={class:"custom-container details"},M=(0,a._)("summary",null,"模拟实现 Function.prototype.bind()",-1),P=(0,a._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,a._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,a._)("code",null,[(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#6A9955"}},"/** ES6 实现 **/")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#4EC9B0"}},"Function"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"myBind"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"function"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},", ..."),(0,a._)("span",{style:{color:"#9CDCFE"}},"args"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"if"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#569CD6"}},"typeof"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#569CD6"}},"this"),(0,a._)("span",{style:{color:"#D4D4D4"}}," !== "),(0,a._)("span",{style:{color:"#CE9178"}},"'function'"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#C586C0"}},"throw"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#569CD6"}},"new"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#4EC9B0"}},"TypeError"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#CE9178"}},"'not a function'"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"const"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#4FC1FF"}},"self"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"this")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"return"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#569CD6"}},"function"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#DCDCAA"}},"F"),(0,a._)("span",{style:{color:"#D4D4D4"}},"(..."),(0,a._)("span",{style:{color:"#9CDCFE"}},"fArgs"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#569CD6"}},"const"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#4FC1FF"}},"params"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = [..."),(0,a._)("span",{style:{color:"#9CDCFE"}},"args"),(0,a._)("span",{style:{color:"#D4D4D4"}},", ..."),(0,a._)("span",{style:{color:"#9CDCFE"}},"fArgs"),(0,a._)("span",{style:{color:"#D4D4D4"}},"]")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#6A9955"}},"// 当作为构造函数时")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#C586C0"}},"if"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#569CD6"}},"this"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#569CD6"}},"instanceof"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#4EC9B0"}},"F"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"      "),(0,a._)("span",{style:{color:"#C586C0"}},"return"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#569CD6"}},"new"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#DCDCAA"}},"self"),(0,a._)("span",{style:{color:"#D4D4D4"}},"(..."),(0,a._)("span",{style:{color:"#9CDCFE"}},"params"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#6A9955"}},"// 当作为普通函数时，将函数的 this 指向 context")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#C586C0"}},"return"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"self"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"apply"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#9CDCFE"}},"params"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"})])]),(0,a._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"})])],-1),G=(0,a._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,a._)("pre",{class:"shiki",style:{"background-color":"#1E1E1E"}},[(0,a._)("code",null,[(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#6A9955"}},"/** ES5 实现 **/")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#4EC9B0"}},"Function"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"myBind"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"function"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"if"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#569CD6"}},"typeof"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#569CD6"}},"this"),(0,a._)("span",{style:{color:"#D4D4D4"}}," !== "),(0,a._)("span",{style:{color:"#CE9178"}},"'function'"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#C586C0"}},"throw"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#569CD6"}},"new"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#4EC9B0"}},"Error"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#CE9178"}},"'not a function'"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 获取调用 bind 的函数")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"var"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"self"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"this")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 获取除了 thisArg 外的剩余参数（第二个到最后一个）")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"var"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"args"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#4EC9B0"}},"Array"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"slice"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"call"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#569CD6"}},"arguments"),(0,a._)("span",{style:{color:"#D4D4D4"}},", "),(0,a._)("span",{style:{color:"#B5CEA8"}},"1"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"var"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#DCDCAA"}},"fNOP"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"function"),(0,a._)("span",{style:{color:"#D4D4D4"}}," () {}")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"var"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#DCDCAA"}},"fBound"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"function"),(0,a._)("span",{style:{color:"#D4D4D4"}}," () {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#6A9955"}},"// 获取返回函数的参数")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#569CD6"}},"var"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"bindArgs"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#4EC9B0"}},"Array"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"slice"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"call"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#569CD6"}},"arguments"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#C586C0"}},"return"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"self"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"apply"),(0,a._)("span",{style:{color:"#D4D4D4"}},"(")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"      "),(0,a._)("span",{style:{color:"#6A9955"}},"// 当作为构造函数时，将绑定函数的 this 实例指向实例")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"      "),(0,a._)("span",{style:{color:"#6A9955"}},"// 当作为普通函数时，将绑定函数的 this 指向 context")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"      "),(0,a._)("span",{style:{color:"#569CD6"}},"this"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#569CD6"}},"instanceof"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#4EC9B0"}},"fNOP"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ? "),(0,a._)("span",{style:{color:"#569CD6"}},"this"),(0,a._)("span",{style:{color:"#D4D4D4"}}," : "),(0,a._)("span",{style:{color:"#9CDCFE"}},"context"),(0,a._)("span",{style:{color:"#D4D4D4"}},",")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"      "),(0,a._)("span",{style:{color:"#9CDCFE"}},"args"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#DCDCAA"}},"concat"),(0,a._)("span",{style:{color:"#D4D4D4"}},"("),(0,a._)("span",{style:{color:"#9CDCFE"}},"bindArgs"),(0,a._)("span",{style:{color:"#D4D4D4"}},")")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    )")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#6A9955"}},"// 存在原型时，修改返回函数的 prototype 为绑定函数的 prototype，使实例可以继承绑定函数原型中的值")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#569CD6"}},"var"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#4EC9B0"}},"self"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"if"),(0,a._)("span",{style:{color:"#D4D4D4"}}," ("),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype"),(0,a._)("span",{style:{color:"#D4D4D4"}},") {")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"    "),(0,a._)("span",{style:{color:"#4EC9B0"}},"fNOP"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  }")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"}),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#4EC9B0"}},"fBound"),(0,a._)("span",{style:{color:"#D4D4D4"}},"."),(0,a._)("span",{style:{color:"#9CDCFE"}},"prototype"),(0,a._)("span",{style:{color:"#D4D4D4"}}," = "),(0,a._)("span",{style:{color:"#569CD6"}},"new"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#DCDCAA"}},"fNOP"),(0,a._)("span",{style:{color:"#D4D4D4"}},"()")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"  "),(0,a._)("span",{style:{color:"#C586C0"}},"return"),(0,a._)("span",{style:{color:"#D4D4D4"}}," "),(0,a._)("span",{style:{color:"#9CDCFE"}},"fBound")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"},[(0,a._)("span",{style:{color:"#D4D4D4"}},"}")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"line"})])]),(0,a._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"})])],-1),I={href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind",target:"_blank",rel:"noopener noreferrer"},Z=(0,a.Uk)("Function.prototype.bind() —— MDN"),L=(0,a.Uk)("相关学习文章 "),H={href:"https://github.com/mqyqingfeng/Blog/issues/12",target:"_blank",rel:"noopener noreferrer"},K=(0,a.Uk)("JavaScript 深入之 bind 的模拟实现"),Q={href:"https://zhuanlan.zhihu.com/p/25379434",target:"_blank",rel:"noopener noreferrer"},V=(0,a.Uk)("从一道面试题的进阶，到“我可能看了假源码”"),X={href:"https://zhuanlan.zhihu.com/p/25483361",target:"_blank",rel:"noopener noreferrer"},Y=(0,a.Uk)("从一道面试题的进阶，到“我可能看了假源码”（2）"),$=(0,a.uE)('<h2 id="工具方法系列" tabindex="-1"><a class="header-anchor" href="#工具方法系列" aria-hidden="true">#</a> 工具方法系列</h2><h3 id="debounce-函数防抖" tabindex="-1"><a class="header-anchor" href="#debounce-函数防抖" aria-hidden="true">#</a> debounce 函数防抖</h3><div class="custom-container tip"><p class="custom-container-title">函数防抖</p><p><strong>作用</strong>: 一个函数在一段时间内多次触发都<strong>只执行最后一次</strong> <br><strong>原理</strong>: 利用定时器，在函数第一次执行时设定一个定时器，再次调用时如果已经设定过定时器就清空之前的定时器并设定一个新的定时器，当定时器结束后执行传入的回调函数 <br><strong>应用</strong>: 搜索输入框获取用户输入的联想结果</p></div><details class="custom-container details"><summary>实现防抖函数</summary><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">function</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">debounce</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">fn</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">wait</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 通过闭包缓存定时器 id</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">let</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">timer</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">null</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">function</span><span style="color:#D4D4D4;"> (...</span><span style="color:#9CDCFE;">args</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// 如果定时器已经存在，清除定时器</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">timer</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">clearTimeout</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">timer</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">timer</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">null</span></span>\n<span class="line"><span style="color:#D4D4D4;">    }</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// 设定定时器，定时器结束后执行传入的回调函数 fn</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">timer</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">setTimeout</span><span style="color:#D4D4D4;">(() </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">fn</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">apply</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">args</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">    }, </span><span style="color:#9CDCFE;">wait</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">  }</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="throttle-函数节流" tabindex="-1"><a class="header-anchor" href="#throttle-函数节流" aria-hidden="true">#</a> throttle 函数节流</h3><div class="custom-container tip"><p class="custom-container-title">函数节流</p><p><strong>作用</strong>: 函数节流指指的是在一段时间内只允许函数执行一次 (例如 <code>3</code> 秒执行一次那么在函数第一次调用后的 <code>3</code> 秒内后面的函数调用将被忽略) <br><strong>原理</strong>: 利用时间戳来判断，记录上次执行的时间戳，在每次触发事件时判断当前时间是否大于上次执行的时间 + 设置的间隔 ，如果是则执行回调并更新上次执行的时间戳<br><strong>应用</strong>: 降低 <code>scroll resize</code> 事件的触发频率</p></div><details class="custom-container details"><summary>实现节流函数</summary><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">function</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">throttle</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">fn</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">wait</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 通过闭包缓存上一次的调用时间 (默认为 0)</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">let</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">lastCallTime</span><span style="color:#D4D4D4;"> = </span><span style="color:#B5CEA8;">0</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">function</span><span style="color:#D4D4D4;"> () {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">now</span><span style="color:#D4D4D4;"> = </span><span style="color:#4EC9B0;">Date</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">now</span><span style="color:#D4D4D4;">()</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// 判断当前调用时间和上次调用时间的差值是否大于 wait</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">now</span><span style="color:#D4D4D4;"> - </span><span style="color:#9CDCFE;">lastCallTime</span><span style="color:#D4D4D4;"> &gt;= </span><span style="color:#9CDCFE;">wait</span><span style="color:#D4D4D4;">) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#6A9955;">// 更新调用时间</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">lastCallTime</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">now</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#6A9955;">// 执行回调函数</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">fn</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">apply</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">, </span><span style="color:#569CD6;">arguments</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">    }</span></span>\n<span class="line"><span style="color:#D4D4D4;">  }</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>',7),ss={},ls=(0,n(3744).Z)(ss,[["render",function(s,l){const n=(0,a.up)("ExternalLinkIcon"),ss=(0,a.up)("CodeGroupItem"),ls=(0,a.up)("CodeGroup");return(0,a.wg)(),(0,a.iD)("div",null,[e,(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("a",o,[D,(0,a.Wm)(n)])]),(0,a._)("li",null,[(0,a._)("a",p,[c,(0,a.Wm)(n)])])]),r,(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("a",t,[i,(0,a.Wm)(n)]),_]),(0,a._)("li",null,[(0,a._)("a",y,[C,(0,a.Wm)(n)])])]),d,(0,a._)("p",null,[(0,a._)("a",u,[v,(0,a.Wm)(n)])]),m,b,(0,a._)("details",E,[F,(0,a.Wm)(ls,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ss,{title:"ES6 实现",active:""},{default:(0,a.w5)((()=>[k])),_:1}),(0,a.Wm)(ss,{title:"ES5 实现"},{default:(0,a.w5)((()=>[U])),_:1})])),_:1})]),(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("a",f,[A,(0,a.Wm)(n)])]),(0,a._)("li",null,[(0,a._)("a",h,[g,(0,a.Wm)(n)])])]),x,j,(0,a._)("details",w,[B,(0,a.Wm)(ls,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ss,{title:"ES6 实现",active:""},{default:(0,a.w5)((()=>[O])),_:1}),(0,a.Wm)(ss,{title:"ES5 实现"},{default:(0,a.w5)((()=>[W])),_:1})])),_:1})]),(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("a",S,[N,(0,a.Wm)(n)])]),(0,a._)("li",null,[(0,a._)("a",z,[J,(0,a.Wm)(n)])])]),R,T,(0,a._)("details",q,[M,(0,a.Wm)(ls,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ss,{title:"ES6 实现",active:""},{default:(0,a.w5)((()=>[P])),_:1}),(0,a.Wm)(ss,{title:"ES5 实现"},{default:(0,a.w5)((()=>[G])),_:1})])),_:1})]),(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("a",I,[Z,(0,a.Wm)(n)])]),(0,a._)("li",null,[L,(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("a",H,[K,(0,a.Wm)(n)])]),(0,a._)("li",null,[(0,a._)("a",Q,[V,(0,a.Wm)(n)])]),(0,a._)("li",null,[(0,a._)("a",X,[Y,(0,a.Wm)(n)])])])])]),$])}]])},3744:(s,l)=>{l.Z=(s,l)=>{const n=s.__vccOpts||s;for(const[s,a]of l)n[s]=a;return n}}}]);